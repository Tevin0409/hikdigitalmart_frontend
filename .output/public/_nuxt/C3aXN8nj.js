import{_ as R}from"./B_q1d7n8.js";import{s as $}from"./B-UFHLkv.js";import{y as V,R as D,J as F,r as g,S as T,U as L,q as E,c as r,a as t,b as f,w as h,t as o,F as N,m as P,N as Q,V as z,I as G,o as a,G as J,u as Y,v as S,d as H}from"./DFYqaOGF.js";import"./CibPE6Ef.js";import"./oQGiuSsV.js";const O=""+new URL("empty-cart.Dg7uAmTc.png",import.meta.url).href,W={class:"cart"},X={key:0,class:"flex flex-col items-center justify-center bg-white rounded-lg p-6 mb-6 container mx-auto"},Z={key:1,class:"mx-auto container"},tt=["href","onClick"],et={class:"text-primary font-semibold"},st=["href","target"],ot={class:"text-surface-700 dark:text-surface-0"},at={class:"bg-red-10 rounded-lg p-4"},rt={class:"flex justify-between items-center mb-4"},lt={class:"text-lg font-semibold text-gray-700"},nt={class:"bg-white mx-auto"},ct={class:"bg-white grid grid-cols-12 gap-4"},it={class:"col-span-12 md:col-span-9"},dt={class:"flex items-start"},ut=["src"],pt={class:"ml-4 flex-grow"},mt={class:"text-lg font-medium"},_t={class:"text-gray-600 truncate"},gt={class:"font-bold"},ht={class:"text-right"},bt={class:"text-xl font-semibold text-gray-900"},xt={class:"flex items-center justify-between mt-4"},ft=["onClick"],yt={class:"flex items-center"},vt=["onClick","disabled"],kt={class:"px-4"},wt=["onClick"],Ct={class:"col-span-12 md:col-span-3"},Vt={class:"cart-total rounded-lg p-4 bg-white shadow"},Tt={class:"text-gray-600"},Nt={class:"flex items-center justify-between my-4"},Pt={class:"relative inline-flex items-center cursor-pointer"},St={key:0,class:"text-gray-600"},Bt={class:"text-lg font-bold"},Kt={__name:"index",setup(Mt){const{$formatPrice:B}=V(),M=D(),p=F();V(),g("");const c=T(()=>p.cartTotal),b=T(()=>p.cartItems),i=g(!1),j=g({icon:"pi pi-home",route:"/dashboard"}),q=g([{label:"Cart",route:"/cart"},{label:"Checkout",route:"/checkout"}]),d=l=>B(l),y=async(l,e)=>{await p.updateQuantity(l,e)},A=async l=>{await p.removeFromCart(l.id)},x=l=>l*.16,I=()=>{M.push("/checkout")};return L(()=>{}),(l,e)=>{const v=R,U=E("router-link"),K=$;return a(),r("div",W,[b.value.length<1?(a(),r("div",X,[e[2]||(e[2]=t("img",{src:O,alt:"Empty Cart",class:"w-20 h-20 mb-4"},null,-1)),e[3]||(e[3]=t("h2",{class:"text-xl font-semibold text-gray-700"},"Your cart is empty!",-1)),e[4]||(e[4]=t("p",{class:"text-gray-500 text-sm mb-4"}," Browse our categories and discover our best deals! ",-1)),f(v,{to:"/"},{default:h(()=>e[1]||(e[1]=[t("button",{class:"bg-primary hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded"}," Start Shopping ",-1)])),_:1})])):(a(),r("div",Z,[f(K,{home:j.value,model:q.value,class:""},{item:h(({item:s,props:u})=>[s.route?(a(),J(U,{key:0,to:s.route,custom:""},{default:h(({href:m,navigate:_})=>[t("a",S({href:m},u.action,{onClick:_}),[t("span",{class:Y([s.icon,"text-color"])},null,2),t("span",et,o(s.label),1)],16,tt)]),_:2},1032,["to"])):(a(),r("a",S({key:1,href:s.url,target:s.target},u.action),[t("span",ot,o(s.label),1)],16,st))]),_:1},8,["home","model"]),t("div",at,[t("div",rt,[t("h3",lt," Cart ("+o(b.value.length)+") ",1),f(v,{to:"/cart"},{default:h(()=>e[5]||(e[5]=[t("a",{href:"#",class:"text-primary hover:text-orange-600 text-sm font-semibold flex items-center"},null,-1)])),_:1})]),t("div",nt,[t("div",ct,[t("div",it,[(a(!0),r(N,null,P(b.value,s=>{var u,m,_,k,w,C;return a(),r("div",{class:"rounded-lg p-4 gap-3 pb-4 mb-2 border cursor-pointer",key:s.id},[t("div",dt,[t("img",{class:"w-20 h-20 object-contain",src:((m=(u=s.productModel)==null?void 0:u.images.find(n=>n.isPrimary))==null?void 0:m.uploadUrl)??((k=(_=s.images)==null?void 0:_.find(n=>n.isPrimary))==null?void 0:k.uploadUrl),alt:"Product Image"},null,8,ut),t("div",pt,[t("h2",mt,o(((w=s.productModel)==null?void 0:w.name)??s.name),1),t("p",_t,[(a(!0),r(N,null,P(s.features||s.productModel.features,n=>(a(),r("span",gt,o(n.description),1))),256))])]),t("div",ht,[t("p",bt," Ksh "+o(d(((C=s.productModel)==null?void 0:C.price)??s.price)),1)])]),t("div",xt,[t("button",{onClick:n=>A(s),class:"text-red-500 flex items-center"},e[6]||(e[6]=[t("span",{class:"mr-2"},"🗑️",-1),H(" Remove ")]),8,ft),t("div",yt,[t("button",{onClick:n=>y(s.id,s.quantity-1),class:"bg-gray-300 px-3 py-1 rounded-lg",disabled:s.quantity<=1}," - ",8,vt),t("span",kt,o(s.quantity),1),t("button",{onClick:n=>y(s.id,s.quantity+1),class:"bg-primary text-white px-3 py-1 rounded-lg"}," + ",8,wt)])])])}),128))]),t("div",Ct,[t("div",Vt,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-2"},"Cart Total",-1)),t("p",Tt," Subtotal: Ksh "+o(d(c.value)),1),t("div",Nt,[e[9]||(e[9]=t("label",{class:"text-gray-600"},"Apply VAT (16%)",-1)),t("label",Pt,[Q(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),class:"sr-only peer"},null,512),[[z,i.value]]),e[7]||(e[7]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-primary transition-colors"},null,-1)),e[8]||(e[8]=t("div",{class:"absolute left-1 top-1 bg-white border border-gray-300 w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5"},null,-1))])]),e[11]||(e[11]=t("hr",{class:"my-2"},null,-1)),i.value?(a(),r("p",St," VAT (16%): Ksh "+o(d(x(c.value))),1)):G("",!0),e[12]||(e[12]=t("hr",{class:"my-2"},null,-1)),t("p",Bt," Total: Ksh "+o(d(c.value+(i.value?x(c.value):0))),1),t("button",{class:"w-full bg-primary text-white py-2 mt-4 rounded-lg hover:bg-secondary transition",onClick:I}," Checkout ("+o(d(c.value+(i.value?x(c.value):0)))+") ",1)])])])])])]))])}}};export{Kt as default};
