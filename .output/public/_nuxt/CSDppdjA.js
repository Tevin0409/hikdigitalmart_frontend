import{_ as $}from"./DRxTo1v3.js";import{s as z}from"./Csxfib7I.js";import{F as G,_ as H,a as Q,T as Y,b as J,c as X,d as Z}from"./C4s2DSsF.js";import{_ as ee,f as te,R as se,aw as oe,r as o,Q as re,y as v,q as I,c as d,a as r,d as ae,t as ne,b as C,F as ce,m as ie,I as le,o as n,G as de}from"./dcrsIaZE.js";import"./Dj_27Dys.js";import"./DqKEoG3B.js";import"./DqxxeYP8.js";import"./D441Pcds.js";import"./BLQ8y9oz.js";import"./B29C1APa.js";import"./DrIwKKCV.js";import"./B21at0O7.js";import"./DKYX6cxl.js";const ue={name:"Dashboard",components:{FlashCard:G,CategoryCard:H,ProductCard:Q,TopCard:Y,Footer:J,FilterCard:X},props:{searchTerm:{type:String,default:""}},setup(b){te(()=>b.searchTerm,(e,s)=>{S.value=!0,m()}),se(async()=>{m(),M(),await j()});const t=oe(),y=o(1);o(1);const a=re(()=>[..._.value].sort(()=>Math.random()-.5).slice(0,6)),S=o(!1),T=o(null),g=o([]),x=o([20,80]),c=o(!1),u=o(!1),p=t.params.id,N=t.query.searchTerm,w=o({days:"00",hours:"00",minutes:"00",seconds:"00"}),D=e=>{t.push({path:`/products/${e.id}`})},R=o(new Date(new Date().getTime()+3*24*60*60*1e3)),M=()=>{const e=new Date().getTime(),s=R.value-e;s>0?w.value={days:Math.floor(s/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(s%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),w.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},k={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},E=e=>k[e]||"pi pi-question",h=o([]),O=o([]);v();const _=o([]),i=o(0),A=()=>{i.value=(i.value+1)%h.value.length},F=()=>{y.value++,m()},V=()=>{i.value=(i.value-1+h.value.length)%h.value.length},U=e=>{console.log("ca",e)},L=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(e):"0",B=e=>{T.value=[e.id],m()},K=e=>{i.value=e},m=async()=>{c.value=!0,u.value=!0;try{const{$axios:e}=v(),s=t.params.id,f=t.query.searchTerm||"",l={};f&&(l.searchTerm=f.slice(0,5)),s&&(l.categoryId=[s]);const W=await e.get("/product/product-models",{params:{...l,page:y.value,limit:10}});c.value=!1,_.value=W.data.results,await P(),console.log(_.value,"products")}catch(e){console.error("Error fetching products:",e)}finally{c.value=!1,u.value=!1}},P=async()=>{try{const{$axios:e}=v(),s=t.params.id,f={};s&&(f.categoryId="ed7555b7-780e-49c2-9d8d-0525fc89083b");const l=await e.get("/product/features",{params:{...f}});g.value=l.data,console.log(l.data,"features")}catch(e){console.error("Error fetching products:",e)}finally{}},j=async()=>{const{$axios:e}=v();try{const s=await e.get("/product/categories",{});O.value=s.data}catch(s){console.error("Error fetching products:",s)}},q=o([{breakpoint:"1400px",numVisible:2,numScroll:1},{breakpoint:"1199px",numVisible:3,numScroll:1},{breakpoint:"767px",numVisible:2,numScroll:1},{breakpoint:"575px",numVisible:1,numScroll:1}]);return{images:h,currentIndex:i,nextSlide:A,prevSlide:V,goToSlide:K,categories:O,products:_,responsiveOptions:q,getItems:U,getSeverity:e=>{switch(e){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:x,filter:S,showMoreProducts:F,fetching:c,fetchingMore:u,formatPrice:L,randomizedProducts:a,goToProductPage:D,getIcon:E,getCategoryProducts:B,getProduct:m,getFeatures:P,features:g,category:p,searchTer:N}}},pe={class:"container mx-auto my-10 pa-10"},me={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},fe={class:"flex justify-between items-center mb-4"},ge={class:"text-xl font-regular"},he={class:"font-bold"},_e={class:"flex"},ve={class:"w-full"},ye={key:0,class:"text-center mt-6"},Se={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},xe={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Ce={key:3,class:"flex justify-center py-8"};function be(b,t,y,a,S,T){const g=I("FilterCard"),x=I("ProductCard"),c=z,u=$;return n(),d("div",pe,[r("section",me,[r("div",fe,[r("h2",ge,[t[1]||(t[1]=ae(" Search results for ")),r("span",he,ne(a.searchTer),1)]),t[2]||(t[2]=r("div",{class:"flex space-x-2"},null,-1))]),r("div",_e,[C(g,{features:a.features},null,8,["features"]),r("div",ve,[a.fetching&&a.products.length<1?(n(),d("div",ye,t[3]||(t[3]=[r("div",{class:"relative flex justify-center items-center"},[r("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),r("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):a.products.length==0?(n(),d("div",Se,t[4]||(t[4]=[r("img",{src:Z,alt:"No items found",class:"h-56 w-56"},null,-1),r("p",{class:"pt-6"},"No items found",-1)]))):(n(),d("div",xe,[(n(!0),d(ce,null,ie(a.products,p=>(n(),de(x,{key:p.id,item:p},null,8,["item"]))),128))])),a.products.length!=0?(n(),d("div",Ce,[C(c,{type:"button",label:"Show More",icon:"pi pi-sync",loading:a.fetchingMore,onClick:t[0]||(t[0]=p=>a.showMoreProducts())},null,8,["loading"])])):le("",!0)])])]),C(u)])}const Ue=ee(ue,[["render",be],["__scopeId","data-v-e6bb93b1"]]);export{Ue as default};
