import M from"./B3fgAOjB.js";import{_ as A,c as n,a as t,b as N,w,t as l,m as g,p as f,q as h,v as b,F as v,r as _,s as y,x,y as O,z as P,o as i,l as U,A as k,d as D}from"./CoyVHb3q.js";import"./8x9NGM2Z.js";import"./B-x3AKLp.js";import"./DBllE-4O.js";const V={data(){return{selectedFilter:"All",filters:["All","Pending","Delivered","Cancelled"],removeItem:!1,loadingAdd:!1,home:{icon:"pi pi-home"},items:[{label:"Home",route:"/"},{label:"My Account",route:"/profile"}],activeSection:"profile",user:{firstName:"",lastName:"",email:"",address:"",phoneNumber:"",createdAt:""},orders:[],wishlist:[],items:[{label:"Cart",route:"/cart"},{label:"Checkout",route:"/checkout"}]}},computed:{filteredOrders(){return this.selectedFilter==="All"?this.orders:this.orders.filter(o=>o.status===this.selectedFilter)},isWholesaler(){var e;return(e=y().user)==null?void 0:e.shopOwnerVerified}},async mounted(){await this.getUserData(),await this.getWishList(),await this.getOrders()},methods:{updateUser(){},getProductImage(o){var e,a,m;return console.log("Order Item:",o),((a=(e=o==null?void 0:o.productModel)==null?void 0:e.images)==null?void 0:a.length)>0?(console.log("Image found:",(m=o.productModel.images[0])==null?void 0:m.optimizeUrl),o.productModel.images[0].optimizeUrl):(console.log("Using fallback image"),"https://media.istockphoto.com/id/1410977641/photo/high-technology-security-monitoring-system-cctv-camera.jpg?s=612x612&w=0&k=20&c=ueVgTwwn5Xq-S0Tz6Wfj9sILEubWxURkzkvVrzpSYRI=")},formattedPrice(o){const{$formatPrice:e}=x();return e(o)},formatDate(o){return new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},async getOrders(){const e=await O().getOrders();this.orders=e},async removeWish(o){const{$axios:e}=x();this.removeItem=!0;try{const a=await e.post(`/product/wishlist/remove/${productID}`);this.removeItem=!1}catch{this.removeItem=!1}},async addToCart(o){const{$axios:e}=x();this.loadingAdd=!0,setTimeout(()=>{this.loadingAdd=!1},2e3);try{const a={productId:o.id,quantity:1},m=await e.post("/product/cart/add",a);this.loadingAdd=!1}catch{this.loadingAdd=!1}},async getWishList(){const{$axios:o}=x();try{const e=await o.get("/product/wishlist");this.wishlist=e.data}catch(e){console.error(e)}},async getUserData(){const o=y();this.user=o.user},logout(){y().logout()}}},I={class:"container mx-auto my-10 px-4"},L={class:"breadcrumb text-sm mb-4 card"},z={class:"card flex"},F=["href","onClick"],W={class:"text-primary font-semibold"},B=["href","target"],E={class:"text-surface-700 dark:text-surface-0"},T={class:"flex flex-col md:flex-row"},j={class:"space-y-2 text-gray-600 pt-2 p-4"},q={class:"md:w-3/4 w-full bg-white border p-4"},G={key:0},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"flex justify-between mt-6"},K={key:1},Q={class:"mt-4 flex flex-col md:flex-row items-center md:items-start"},X={class:"ml-4"},Y={class:"text-gray-600"},J={key:2},Z={class:"text-xl font-bold mb-4 text-red-500"},$={class:"p-4 bg-gray-100"},ee={class:"flex space-x-4 mb-4 overflow-x-auto"},te=["onClick"],se={class:"flex justify-between items-center"},oe={class:"text-sm text-gray-500"},re={class:"mt-2 flex flex-col md:flex-row items-center md:items-start"},le=["src"],ie={class:"ml-0 md:ml-4 text-center md:text-left"},ne={class:"text-red-600 font-semibold"},ae={class:"text-gray-700"},de={key:0,class:"text-blue-600"},ue={class:"text-gray-800 font-semibold mt-1"};function me(o,e,a,m,r,d){const S=P("router-link"),C=M;return i(),n("div",I,[t("div",L,[t("div",z,[N(C,{home:r.home,model:r.items},{item:w(({item:s,props:u})=>[s.route?(i(),U(S,{key:0,to:s.route,custom:""},{default:w(({href:c,navigate:p})=>[t("a",k({href:c},u.action,{onClick:p}),[t("span",{class:g([s.icon,"text-color"])},null,2),t("span",W,l(s.label),1)],16,F)]),_:2},1032,["to"])):(i(),n("a",k({key:1,href:s.url,target:s.target},u.action),[t("span",E,l(s.label),1)],16,B))]),_:1},8,["home","model"])])]),t("button",{class:"md:hidden bg-red-500 text-white px-4 py-2 rounded mb-4",onClick:e[0]||(e[0]=(...s)=>o.toggleSidebar&&o.toggleSidebar(...s))},l(o.sidebarOpen?"Close Menu":"Menu"),1),t("div",T,[t("aside",{class:g(["md:w-1/4 w-full bg-white shadow-md md:shadow-none md:block fixed md:relative top-0 left-0 h-full md:h-auto transform transition-transform duration-300 ease-in-out",o.sidebarOpen?"translate-x-0":"-translate-x-full md:translate-x-0"])},[t("ul",j,[e[10]||(e[10]=t("li",{class:"font-bold text-red-500"},"Manage My Account",-1)),t("li",{onClick:e[1]||(e[1]=s=>o.setActiveSection("profile")),class:"cursor-pointer"}," Profile "),t("li",{onClick:e[2]||(e[2]=s=>o.setActiveSection("paymentOptions")),class:"cursor-pointer"}," Payment Options "),t("li",{onClick:e[3]||(e[3]=s=>o.setActiveSection("orders")),class:"font-bold text-red-500 mt-4 cursor-pointer"}," My Orders ")]),t("button",{onClick:e[4]||(e[4]=(...s)=>d.logout&&d.logout(...s)),class:"bg-red-500 text-white px-4 py-2 rounded w-full mt-4 md:mt-12"}," Logout ")],2),t("main",q,[r.activeSection==="profile"?(i(),n("div",G,[t("form",null,[t("div",R,[t("div",null,[e[11]||(e[11]=t("label",null,"First Name",-1)),h(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=s=>r.user.firstName=s),class:"border w-full p-2 mt-1"},null,512),[[b,r.user.firstName]])]),t("div",null,[e[12]||(e[12]=t("label",null,"Last Name",-1)),h(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>r.user.lastName=s),class:"border w-full p-2 mt-1"},null,512),[[b,r.user.lastName]])]),t("div",null,[e[13]||(e[13]=t("label",null,"Email",-1)),h(t("input",{type:"email","onUpdate:modelValue":e[7]||(e[7]=s=>r.user.email=s),class:"border w-full p-2 mt-1"},null,512),[[b,r.user.email]])]),t("div",null,[e[14]||(e[14]=t("label",null,"Phone Number",-1)),h(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>r.user.phoneNumber=s),class:"border w-full p-2 mt-1"},null,512),[[b,r.user.phoneNumber]])])]),t("div",H,[e[15]||(e[15]=t("button",{class:"border px-4 py-2 w-1/2 md:w-auto"},"Cancel",-1)),t("button",{class:"bg-red-500 text-white px-4 py-2 w-1/2 md:w-auto",onClick:e[9]||(e[9]=(...s)=>d.updateUser&&d.updateUser(...s))}," Save Changes ")])])])):f("",!0),r.activeSection==="paymentOptions"?(i(),n("div",K,[e[18]||(e[18]=t("h2",{class:"text-xl font-bold mb-4 text-red-500"},"Payment Method",-1)),t("div",Q,[e[17]||(e[17]=t("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/M-PESA_LOGO-01.svg/512px-M-PESA_LOGO-01.svg.png?20191120100524",class:"w-1/2 md:w-1/4",alt:"Mpesa Logo"},null,-1)),t("div",X,[e[16]||(e[16]=t("h3",{class:"font-bold mb-2"},"Mpesa",-1)),t("p",Y,"Mobile Number: "+l(r.user.phoneNumber),1)])])])):f("",!0),r.activeSection==="orders"?(i(),n("div",J,[t("h2",Z,l(d.isWholesaler?"My Quotations":"My Orders"),1),t("div",$,[t("div",ee,[(i(!0),n(v,null,_(r.filters,s=>(i(),n("button",{key:s,onClick:u=>r.selectedFilter=s,class:g(["px-4 py-2 rounded-full border whitespace-nowrap",r.selectedFilter===s?"bg-red-100 text-red-600":"bg-white text-gray-600"])},l(s),11,te))),128))]),(i(!0),n(v,null,_(d.filteredOrders,(s,u)=>{var c,p;return i(),n("div",{key:u,class:"bg-white shadow-md rounded-lg mb-4 p-4"},[t("div",se,[t("span",{class:g(["px-3 py-1 text-xs rounded-full",{"bg-yellow-200 text-yellow-800":s.status==="Pending","bg-green-100 text-green-600":s.status==="Delivered","bg-gray-300 text-gray-700":s.status==="Cancelled"}])},l(s.status),3),t("span",oe,l(d.formatDate(s.createdAt)),1)]),t("div",re,[t("img",{src:(p=(c=s.orderItems[0])==null?void 0:c.productModel.images[0])==null?void 0:p.optimizeUrl,alt:"Product Image",class:"w-16 h-16 rounded-md object-cover"},null,8,le),t("div",ie,[t("p",ne," Order ID: "+l(s.id.slice(0,8)),1),t("p",ae,[D(l(s.orderItems[0].productModel.name)+" ",1),s.orderItems.length>1?(i(),n("span",de," & "+l(s.orderItems.length-1)+" more items",1)):f("",!0)]),t("p",ue," KES "+l(d.formattedPrice(s.total)),1)])])])}),128))])])):f("",!0)])])])}const be=A(V,[["render",me]]);export{be as default};
