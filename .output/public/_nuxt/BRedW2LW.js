import{_ as W}from"./DC7L6XEk.js";import{s as q}from"./DdYFUDFT.js";import{F as G,_ as H,a as Q,T as Y,b as J,c as X,d as Z}from"./i5jFJw8R.js";import{T as $}from"./UgkUlQfD.js";import{_ as ee,f as te,S as oe,Q as se,r,R as re,y as D,q as x,c as i,b as y,a as t,F as N,m as R,G as I,I as M,o as c,d as ne,t as S}from"./DwO-iRVR.js";import"./CKFdUZxC.js";import"./BZv_5Db4.js";import"./Dh3RlvJR.js";import"./B3a3rP6G.js";import"./C1O91PKi.js";import"./CtgpRcHL.js";import"./Bc9VJzJP.js";import"./Bg6-diOZ.js";import"./Ce1iqvKm.js";import"./Cfm_vNe3.js";import"./HTxoxaqh.js";import"./DsmxJ0ba.js";const ae={name:"Dashboard",components:{FlashCard:G,CategoryCard:H,ProductCard:Q,TopCard:Y,Footer:J,FilterCard:X,TopDeal:$},props:{searchTerm:{type:String,default:""}},setup(p){te(()=>p.searchTerm,(e,s)=>{b.value=!0,v()}),oe(async()=>{v(),n(),await B()});const a=se(),C=r(1);r(1);const o=re(()=>[..._.value].sort(()=>Math.random()-.5).slice(0,6)),b=r(!1),f=r(null),T=r([20,80]),l=r(!1),d=r(!1),g=r({days:"00",hours:"00",minutes:"00",seconds:"00"}),w=e=>{a.push({path:`/products/${e.id}`})},P=r(new Date(new Date().getTime()+3*24*60*60*1e3)),n=()=>{const e=new Date().getTime(),s=P.value-e;s>0?g.value={days:Math.floor(s/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(s%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),g.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},O={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},h=e=>O[e]||"pi pi-question",m=r([]),k=r([]);D();const _=r([]),u=r(0),A=()=>{u.value=(u.value+1)%m.value.length},E=()=>{C.value++,v()},V=()=>{u.value=(u.value-1+m.value.length)%m.value.length},F=e=>{console.log("ca",e)},U=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(e):"0",j=e=>{console.log("findCategoryProductsw",e),f.value=[e.id],v()},L=e=>{u.value=e},v=async()=>{l.value=!0,d.value=!0;try{const{$axios:e}=D(),s={};p.searchTerm&&(s.searchTerm=p.searchTerm),f.value&&(s.categoryIds=f.value);const z=await e.get("/product/product-models",{params:{...s,page:C.value,limit:10}});l.value=!1,d.value=!1,_.value=[..._.value,...z.data.results]}catch(e){console.error("Error fetching products:",e),l.value=!1,d.value=!1}},B=async()=>{const{$axios:e}=D();try{const s=await e.get("/product/categories",{});k.value=s.data}catch(s){console.error("Error fetching products:",s)}},K=r([{breakpoint:"1400px",numVisible:4,numScroll:4},{breakpoint:"1199px",numVisible:4,numScroll:4},{breakpoint:"767px",numVisible:2,numScroll:2},{breakpoint:"475px",numVisible:1,numScroll:1}]);return{images:m,currentIndex:u,nextSlide:A,prevSlide:V,goToSlide:L,categories:k,products:_,responsiveOptions:K,getItems:F,getSeverity:e=>{switch(e){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:T,filter:b,showMoreProducts:E,fetching:l,fetchingMore:d,formatPrice:U,randomizedProducts:o,goToProductPage:w,getIcon:h,getCategoryProducts:j}}},ce={class:"container mx-auto my-10 pa-10"},ie={class:"p-4 rounded-md"},le={class:"flex overflow-x-auto gap-4 p-2"},de=["onClick"],ue={class:"relative"},me=["src","alt"],pe={class:"text-sm font-medium mt-2 truncate"},fe={class:"text-lg font-semibold text-gray-900"},ge={class:"text-gray-500 text-xs line-through"},he={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},_e={class:"flex"},ve={class:"w-full"},xe={key:0,class:"text-center mt-6"},ye={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Se={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Ce={key:3,class:"flex justify-center py-8"};function be(p,a,C,o,b,f){const T=x("TopCard"),l=x("TopDeal"),d=x("FilterCard"),g=x("ProductCard"),w=q,P=W;return c(),i("div",ce,[y(T,{categories:o.categories},null,8,["categories"]),y(l),t("section",null,[t("div",ie,[a[1]||(a[1]=t("div",{class:"flex justify-between items-center mb-4 px-2"},[t("h2",{class:"text-lg font-semibold"},"Top selling items")],-1)),t("div",le,[(c(!0),i(N,null,R(o.randomizedProducts,(n,O)=>{var h;return c(),i("div",{key:O,class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:m=>o.goToProductPage(n)},[t("div",ue,[t("img",{src:(h=n.images[0])==null?void 0:h.optimizeUrl,alt:n.name,class:"w-full h-36 object-cover rounded-md"},null,8,me)]),ne(" "+S(n.product.name)+" ",1),t("h3",pe,S(n.name),1),t("p",fe,S(o.formatPrice(n.price)),1),t("p",ge,S(n.oldPrice),1)],8,de)}),128))])])]),t("section",he,[a[4]||(a[4]=t("div",{class:"flex justify-between items-center mb-4"},[t("h2",{class:"text-xl font-bold"},"Explore Our Products"),t("div",{class:"flex space-x-2"},[t("button",{class:"bg-red-500 text-white px-4 py-2"},"View All")])],-1)),t("div",_e,[o.filter?(c(),I(d,{key:0})):M("",!0),t("div",ve,[o.fetching&&o.products.length<1?(c(),i("div",xe,a[2]||(a[2]=[t("div",{class:"relative flex justify-center items-center"},[t("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),t("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):o.products.length==0?(c(),i("div",ye,a[3]||(a[3]=[t("img",{src:Z,alt:"No items found",class:"h-56 w-56"},null,-1),t("p",{class:"pt-6"},"No items found",-1)]))):(c(),i("div",Se,[(c(!0),i(N,null,R(o.products,n=>(c(),I(g,{key:n.id,item:n},null,8,["item"]))),128))])),o.products.length!=0?(c(),i("div",Ce,[y(w,{type:"button",label:"Show More",icon:"pi pi-sync",loading:o.fetchingMore,onClick:a[0]||(a[0]=n=>o.showMoreProducts())},null,8,["loading"])])):M("",!0)])])]),y(P)])}const Ke=ee(ae,[["render",be],["__scopeId","data-v-87d6c5bf"]]);export{Ke as default};
