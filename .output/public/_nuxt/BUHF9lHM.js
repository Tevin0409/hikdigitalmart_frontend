import{_ as tt}from"./C6WL5GiY.js";import et from"./Bfk8XPW3.js";import{_ as st,F as ot,T as rt,a as it,b as nt,c as at,d as ct}from"./BlvnBFXI.js";import lt from"./DbieUCGI.js";import B from"./5eePZ1dp.js";import{c as n,a as t,t as f,b as y,F as O,r as F,o as i,m as q,_ as J,j as u,s as U,B as A,C as dt,x as E,y as z,D as G,w as ut,E as H,z as k,l as D,p as V,G as mt}from"./CoyVHb3q.js";import{R as Y}from"./VVXzHwl5.js";import"./eeer9vDV.js";import"./Be1fzYNM.js";import"./3A9dI5Hm.js";import"./B-x3AKLp.js";import"./DBllE-4O.js";import"./D3b98cz8.js";import"./CyGyADv7.js";import"./C4furr1e.js";import"./DmfvTtO6.js";import"./DVs2OJRz.js";import"./DGEOgZpe.js";import"./DwP0r8OC.js";import"./DTr9jwMw.js";import"./BU7HOwbj.js";import"./Bo6vk6Ju.js";import"./BM2ClVBI.js";import"./DBaRqsmy.js";import"./AlfRBbHE.js";import"./BxSF_YJs.js";import"./BeolfjG4.js";import"./Caw57Z5n.js";import"./C1nQqg27.js";import"./BI9Qtie8.js";import"./D7IbExkG.js";import"./8x9NGM2Z.js";import"./BaLwuUdj.js";import"./CnELaeCv.js";const pt={class:"lg:flex sm:flex-co items-center"},gt=["src"],ft={class:"text-xs font-medium"},ht={class:"text-xs"},vt={class:"mt-2hover:text-primary transitin-colors duration-200 text-primary font-bold text-sm"},xt={class:"text-gray-500 mt-1 text-xs"},_t={class:"flex mt-1 text-center"},yt={class:"carousel flex items-center mt-2 space-x-4"},wt={class:"flex items-center space-x-2 overflow-x-auto"},bt=["src","alt","onClick"],Tt={class:"gap-5 ml-4 relative left-0 top-0 align-start justify-end"},Ct=["loading"],Pt={key:0,class:"pi pi-heart cursor-pointer mr-2",style:{"font-size":"1.3rem"}},St={key:1,class:"pi pi-heart-fill cursor-pointer mr-2",style:{"font-size":"1.3rem",color:"red"}},It={__name:"index",props:{item:Object,loadingWish:Boolean,goToPage:Function,selectImage:Function,addToFavorites:Function,addToCart:Function,isInWishList:Function,formattedPrice:Function},setup(s){return(c,l)=>(i(),n("div",pt,[t("img",{src:s.item.image,style:{"{\n          object-fit":"fit",width:"100%","min-height":"160px","min-width":"160px"},class:"w-40 h-40 object-cover rounded-md"},null,8,gt),t("div",{onClick:l[0]||(l[0]=e=>s.goToPage(s.item)),class:"ml-4 flex flex-col w-full mt-1"},[t("h3",ft,f(s.item.product.name),1),t("span",ht,f(s.item.name),1),t("div",vt,[t("span",null,f(s.formattedPrice(s.item.price)),1)]),t("p",xt,[t("strong",null,f(s.item.features.map(e=>e.description).join(", ")),1)]),t("div",_t,[y(Y,{reviews:s.item.Review},null,8,["reviews"])]),t("div",yt,[t("div",wt,[(i(!0),n(O,null,F(s.item.images,(e,_)=>(i(),n("img",{key:_,src:e.uploadUrl,alt:"Product "+(_+1),onClick:w=>s.selectImage(s.item,e.uploadUrl),class:q(["w-10 h-10 md:w-10 md:h-10 rounded-md border border-gray-300 cursor-pointerhover:border-orange-500",{"border-orange-500":s.item.image===e}])},null,10,bt))),128))])])]),t("div",Tt,[t("button",{onClick:l[1]||(l[1]=e=>s.addToFavorites(s.item)),loading:s.loadingWish},[s.isInWishList(s.item)?(i(),n("i",St)):(i(),n("i",Pt))],8,Ct),t("button",{class:"rounded-full transition-colors",onClick:l[2]||(l[2]=e=>s.addToCart(s.item))},l[3]||(l[3]=[t("i",{class:"pi pi-shopping-cart text- pt-4",style:{"font-size":"1.3rem"}},null,-1)]))])]))}},kt={components:{Carousel:B,ProductCard:It,RatingCard:Y},setup(){const s=u(["Top Monthly"]),c=U(),l=H(),e=u(null),_=u("Recent"),w=u([]),b=A(()=>o.products),x=()=>{w.value=b.value.sort((r,d)=>d.price-r.price).slice(0,3).map(r=>{var d,g;return{name:r.name,price:r.price,image:((g=(d=r.images)==null?void 0:d[0])==null?void 0:g.uploadUrl)||"",...r}})},m=dt(),{$formatPrice:C}=E(),o=z(),p=r=>`Ksh ${C(r)}`,j=r=>{switch(r){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},$=A(()=>o.wishListItems),T=r=>!r||!r.id?!1:c.isLoggedIn?$.value.some(g=>g.productModel.id===r.id):$.value.some(g=>g.id===r.id),P=(r,d)=>{r.image=d},N=r=>{l.push({path:`/products/${r.id}`})},K=async r=>{const d=z(),g=U();try{if(g.isLoggedIn){const h=await d.addToWishlist(r.id);await d.getWishList(),m.add({severity:"success",summary:h.data.message,group:"br",life:3e3})}else{const h=JSON.parse(localStorage.getItem("wishlist"))||[],I=h.findIndex(L=>L.id===r.id);if(I===-1){const L={id:r.id,name:r.name,created_at:new Date().toISOString(),userId:"user.id",productModelId:r.id,productModel:{...r}};h.push(L),localStorage.setItem("wishlist",JSON.stringify(h)),await d.getWishList(),m.add({severity:"success",summary:"Your Wishlist has been saved locally.",group:"br",life:3e3})}else h.splice(I,1),localStorage.setItem("wishlist",JSON.stringify(h)),await d.getWishList(),m.add({severity:"info",summary:"The item has been removed from your local wishlist.",group:"br",life:3e3})}}catch(h){console.error("Error processing wishlist:",h),m.add({severity:"error",summary:"An error occurred while managing your wishlist.",detail:h.message,group:"br",life:5e3})}};G(()=>{x()});const W=async r=>{console.log(r),U().user;try{const h=await z().addToCart(r,1);m.add({severity:"success",summary:"Product Added to Cart",group:"br",life:3e3}),console.log(h)}catch(g){m.add({severity:"error",summary:"Failed to Add Product",detail:g.message,group:"br",life:5e3})}},S=A(()=>{const r=o.products,d=20;if(r.length===0)return[];const g=[];for(;g.length<d;)g.push(...r);return r.map(I=>{var R;return{image:(R=I.images[0])==null?void 0:R.uploadUrl,images:I.images,...I}})});return{products:b,featuredProducts:S,carousel:e,tabs:s,formattedPrice:p,selectedTab:_,getSeverity:j,selectImage:P,addToFavorites:K,addToCart:W,goToPage:N,isInWishList:T,getTopProducts:x,topProducts:w}}},Ot={class:"flex flex-col md:flex-row w-full p-6"},Ft={class:"w-full md:w-1/5 p-2 m-2 border dark:border-orange-600 rounded-lg shadow-sm"},Wt=["onClick"],$t={class:"relative mx-auto h-"},Lt=["src"],jt={class:"mb-4 font-medium flex justify-around"},Dt={class:"flex justify-around items-center"},Nt={class:"mt-0 font-semibold text-xl py-4"},Rt={class:"flex justify-center text-center"},Mt={class:"py-4"},At={class:"text-gray-600 text-sm text-truncate mb-4"},Et={class:"flex justify-around items-center"},Ut=["onClick"],zt=["onClick","loading"],Vt={key:0,class:"pi pi-heart cursor-pointer mr-2",style:{"font-size":"1.5rem"}},Kt={key:1,class:"pi pi-heart-fill cursor-pointer mr-2",style:{"font-size":"1.5rem",color:"red"}},Bt={class:"p-6 w-full md:w-4/5"},qt={class:"flex flex-col md:flex-row items-center justify-between"},Jt={class:"flex flex-wrap md:flex-nowrap space-x-2 md:space-x-4 border-b"},Gt=["onClick"],Ht={class:"gap-6 mt-4"},Yt={class:"flex flex-col md:flex-row justify-between space-y-4 md:space-x-4 md:space-y-0"},Qt={class:"flex flex-col space-y-4 w-full md:w-1/3"},Xt={class:"flex-1 h-full"},Zt={class:"flex justify-between"},te={class:"gap-5"},ee=["onClick","loading"],se={key:0,class:"pi pi-heart transition-colors cursor-pointer mr-2",style:{"font-size":"1.3rem"}},oe={key:1,class:"pi pi-heart-fill transition-colors cursor-pointer mr-2",style:{"font-size":"1.3rem",color:"red"}},re=["onClick"],ie=["onClick"],ne={class:"relative"},ae=["src"],ce={class:"text-center items-center pt-4 flex flex-col"},le={class:"text-lg font-medium"},de={class:"text-sm"},ue={class:"mt-2 text-primary hover:text-primary transition-colors duration-200 font-bold text-lg"},me={class:"flex mt-1 text-center"},pe={class:"text-gray-500 mt-1"},ge={class:"flex flex-col space-y-4 w-full md:w-1/3"};function fe(s,c,l,e,_,w){const b=k("RatingCard"),x=B,m=k("ProductCard"),C=lt;return i(),n("div",Ot,[t("div",Ft,[c[0]||(c[0]=t("div",{class:"text-lg font-semibold mb-2 border-b flex justify-between items-center"},[t("p",{class:"text-gray-500 d-flex justify-center text-center pl-4"}," Hot Deals ")],-1)),y(x,{d_circular:!0,autoplayInterval:1e4,value:e.topProducts,numVisible:1,numScroll:1,orientation:"horizontal",containerClass:"custom-carousel-heigh flexitems-center justify-center",showIndicators:!1,showNavigators:!1},{item:ut(o=>[t("div",null,[t("div",{class:"mb-4",onClick:p=>e.goToPage(o.data)},[t("div",$t,[t("img",{src:o.data.image,alt:" ",class:"object-cover rounded",style:{"max-width":"100% !important","min-height":"210px !important","max-height":"100px !important",width:"100% !important",height:"100% !important"}},null,8,Lt)])],8,Wt),t("div",jt,f(o.data.name),1),t("div",Dt,[t("div",Nt,f(e.formattedPrice(o.data.price)),1)]),t("div",Rt,[y(b,{reviews:o.data.Review},null,8,["reviews"])]),t("p",Mt,[(i(!0),n(O,null,F(o.data.features,p=>(i(),n("span",At,f(p.description),1))),256))]),t("p",Et,[t("button",{class:"w-3/4 px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-orange-600 focus:outline-none focus:shadow-outline",onClick:p=>e.addToCart(o.data)}," Add to Cart ",8,Ut),t("button",{class:"w-1/4",onClick:p=>e.addToFavorites(o.data),loading:s.loadingWish},[e.isInWishList(o.data)?(i(),n("i",Kt)):(i(),n("i",Vt))],8,zt)])])]),_:1},8,["value"])]),t("div",Bt,[t("div",qt,[c[1]||(c[1]=t("h2",{class:"text-lg font-bold mb-2 md:mb-0"},[t("span",{class:"text-red-500"},"Monthly Featured Items")],-1)),t("div",Jt,[(i(!0),n(O,null,F(e.tabs,o=>(i(),n("button",{key:o,onClick:p=>e.selectedTab=o,class:q(["px-2 py-1 md:px-4 md:py-2 text-sm font-semibold whitespace-nowrap",e.selectedTab===o?"border-b-2 border-primary text-orange-500":"text-gray-600"])},f(o),11,Gt))),128))])]),t("div",Ht,[t("div",Yt,[t("div",Qt,[(i(!0),n(O,null,F(e.featuredProducts.slice(0,2),o=>(i(),D(m,{key:o.name,item:o,loadingWish:s.loadingWish,goToPage:e.goToPage,selectImage:e.selectImage,addToFavorites:e.addToFavorites,addToCart:e.addToCart,isInWishList:e.isInWishList,formattedPrice:e.formattedPrice,class:"border rounded-sm p-4 shadow-sm flex-1 cursor-pointer"},null,8,["item","loadingWish","goToPage","selectImage","addToFavorites","addToCart","isInWishList","formattedPrice"]))),128))]),t("div",Xt,[(i(!0),n(O,null,F(e.featuredProducts.slice(2,3),o=>(i(),n("div",{key:o.name,class:"border rounded-sm p-4 shadow-sm h-full relative group transition duration-300 cursor-pointer"},[t("div",Zt,[y(C,{severity:"warn",value:"New"}),t("div",te,[t("button",{onClick:p=>e.addToFavorites(o),loading:s.loadingWish},[e.isInWishList(o)?(i(),n("i",oe)):(i(),n("i",se))],8,ee),t("button",{class:"rounded-full transition-colors transition-colors",onClick:p=>e.addToCart(o)},c[2]||(c[2]=[t("i",{class:"pi pi-shopping-cart transition-colors text- pt-4",style:{"font-size":"1.3rem"}},null,-1)]),8,re)])]),t("div",{onClick:p=>e.goToPage(o),class:"flex flex-col items-center h-full"},[t("div",ne,[t("img",{src:o.image,class:"object-cover rounded-md w-full h-48"},null,8,ae)]),t("div",ce,[t("h3",le,f(o.product.name),1),t("span",de,f(o.name),1),t("div",ue,[t("span",null,f(e.formattedPrice(o.price)),1)]),t("div",me,[y(b,{reviews:o.Review},null,8,["reviews"])]),t("p",pe,[t("strong",null,f(o.features.map(p=>p.description).join(", ")),1)])])],8,ie)]))),128))]),t("div",ge,[(i(!0),n(O,null,F(e.featuredProducts.slice(3,5),o=>(i(),D(m,{key:o.name,item:o,loadingWish:s.loadingWish,goToPage:e.goToPage,selectImage:e.selectImage,addToFavorites:e.addToFavorites,addToCart:e.addToCart,isInWishList:e.isInWishList,formattedPrice:e.formattedPrice,class:"border rounded-sm p-4 shadow-sm flex-1 cursor-pointer"},null,8,["item","loadingWish","goToPage","selectImage","addToFavorites","addToCart","isInWishList","formattedPrice"]))),128))])])])])])}const he=J(kt,[["render",fe]]),ve={class:"relative"},xe=["src","alt"],_e={class:"mt-2"},ye={class:"text-xs text-gray-600 truncate"},we={class:"text-sm font-medium truncate"},be={class:"text-lg font-semibold text-gray-900"},Te={key:0,class:"text-gray-500 text-xs line-through"},Ce={__name:"topSelling",props:{product:{type:Object,required:!0},goToProductPage:{type:Function,required:!0},formatPrice:{type:Function,required:!0}},setup(s){return(c,l)=>{var e;return i(),n("div",{class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:l[0]||(l[0]=_=>s.goToProductPage(s.product))},[t("div",ve,[t("img",{src:(e=s.product.images[0])==null?void 0:e.uploadUrl,alt:s.product.name,class:"w-full h-36 object-cover rounded-md p-2"},null,8,xe)]),t("div",_e,[t("h4",ye,f(s.product.product.name),1),t("h3",we,f(s.product.name),1),t("p",be,f(s.formatPrice(s.product.price)),1),s.product.oldPrice?(i(),n("p",Te,f(s.product.oldPrice),1)):V("",!0)])])}}},Pe={class:"relative flex justify-center items-center"},Se={__name:"index",setup(s){return(c,l)=>(i(),n("div",Pe,l[0]||(l[0]=[t("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"},null,-1),t("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"},null,-1)])))}},Ie={name:"Dashboard",components:{FlashCard:at,CategoryCard:nt,ProductCard:it,TopCard:rt,Footer:ot,FilterCard:st,TopDeal:he,topSelling:Ce,Loader:Se},props:{searchTerm:{type:String,default:""}},setup(s){mt(()=>s.searchTerm,(a,v)=>{_.value=!0,M()}),G(async()=>{M(),j(),await Q()});const c=H(),l=u(1);u(1);const e=A(()=>[...W.value].sort(()=>Math.random()-.5).slice(0,6)),_=u(!1),w=u(null),b=u([20,80]),x=u(!1),m=u(!1),C=u({days:"00",hours:"00",minutes:"00",seconds:"00"}),o=a=>{c.push({path:`/products/${a.id}`})},p=u(new Date(new Date().getTime()+3*24*60*60*1e3)),j=()=>{const a=new Date().getTime(),v=p.value-a;v>0?C.value={days:Math.floor(v/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(v%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(v%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(v%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),C.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},$={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},T=a=>$[a]||"pi pi-question",P=u([]),N=u([]),{$axios:K}=E(),W=u([]),S=u(0),r=()=>{S.value=(S.value+1)%P.value.length},d=()=>{l.value++,M()},g=()=>{S.value=(S.value-1+P.value.length)%P.value.length},h=a=>{console.log("ca",a)},I=a=>a?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(a):"0",L=a=>{w.value=[a.id],M()},R=a=>{S.value=a},M=async()=>{x.value=!0,m.value=!0;try{const{$axios:a}=E(),v={};s.searchTerm&&(v.searchTerm=s.searchTerm),w.value&&(v.categoryIds=w.value);const Z=await a.get("/product/product-models",{params:{...v,page:l.value,limit:10}});x.value=!1,m.value=!1,W.value=[...W.value,...Z.data.results],console.log(W.value,"getting")}catch(a){console.error("Error fetching products:",a),x.value=!1,m.value=!1}},Q=async()=>{const{$axios:a}=E();try{const v=await a.get("/product/categories",{});N.value=v.data}catch(v){console.error("Error fetching products:",v)}},X=u([{breakpoint:"1400px",numVisible:4,numScroll:4},{breakpoint:"1199px",numVisible:4,numScroll:4},{breakpoint:"767px",numVisible:2,numScroll:2},{breakpoint:"475px",numVisible:1,numScroll:1}]);return{images:P,currentIndex:S,nextSlide:r,prevSlide:g,goToSlide:R,categories:N,products:W,responsiveOptions:X,getItems:h,getSeverity:a=>{switch(a){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:b,filter:_,showMoreProducts:d,fetching:x,fetchingMore:m,formatPrice:I,randomizedProducts:e,goToProductPage:o,getIcon:T,getCategoryProducts:L}}},ke={class:"container mx-auto my-10 pa-10"},Oe={class:"p-4 rounded-md"},Fe={class:"flex overflow-x-auto gap-4 p-2"},We={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},$e={class:"flex"},Le={class:"w-full"},je={key:0,class:"text-center mt-6"},De={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Ne={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Re={key:3,class:"flex justify-center py-8"};function Me(s,c,l,e,_,w){const b=k("TopCard"),x=k("TopDeal"),m=k("topSelling"),C=k("FilterCard"),o=k("Loader"),p=k("ProductCard"),j=et,$=tt;return i(),n("div",ke,[y(b,{categories:e.categories},null,8,["categories"]),y(x),t("section",null,[t("div",Oe,[c[1]||(c[1]=t("div",{class:"flex justify-between items-center mb-4 px-2"},[t("h2",{class:"text-lg font-semibold"},"Top selling items")],-1)),t("div",Fe,[(i(!0),n(O,null,F(e.randomizedProducts,(T,P)=>(i(),D(m,{key:P,product:T,goToProductPage:e.goToProductPage,formatPrice:e.formatPrice},null,8,["product","goToProductPage","formatPrice"]))),128))])])]),t("section",We,[c[3]||(c[3]=t("div",{class:"flex justify-between items-center mb-4"},[t("h2",{class:"text-xl font-bold"},"Explore Our Products"),t("div",{class:"flex space-x-2"},[t("button",{class:"bg-red-500 text-white px-4 py-2"},"View All")])],-1)),t("div",$e,[e.filter?(i(),D(C,{key:0})):V("",!0),t("div",Le,[e.fetching&&e.products.length<1?(i(),n("div",je,[y(o)])):e.products.length==0?(i(),n("div",De,c[2]||(c[2]=[t("img",{src:ct,alt:"No items found",class:"h-56 w-56"},null,-1),t("p",{class:"pt-6"},"No items found",-1)]))):(i(),n("div",Ne,[(i(!0),n(O,null,F(e.products,T=>(i(),D(p,{key:T.id,item:T},null,8,["item"]))),128))])),e.products.length!=0?(i(),n("div",Re,[y(j,{type:"button",label:"Show More",icon:"pi pi-sync",loading:e.fetchingMore,onClick:c[0]||(c[0]=T=>e.showMoreProducts())},null,8,["loading"])])):V("",!0)])])]),y($)])}const ys=J(Ie,[["render",Me],["__scopeId","data-v-7023550f"]]);export{ys as default};
