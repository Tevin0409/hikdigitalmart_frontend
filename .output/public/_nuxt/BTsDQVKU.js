import{_ as U}from"./C01sIoUs.js";import{s as F}from"./CJDQCnFe.js";import{y as P,R as D,J as L,r as g,S as Q,U as z,q as G,c as n,a as t,b as f,w as b,t as a,F as S,m as T,N as J,V as Y,I as B,o as r,G as H,v as M,u as O}from"./2054L8v-.js";import{_ as W}from"./CXqGvy3w.js";import"./IalVA8gP.js";import"./3gxoszUO.js";const X={class:"cart"},Z={class:"mx-auto container"},tt=["href","onClick"],st={class:"text-primary font-semibold"},et=["href","target"],ot={class:"text-surface-700 dark:text-surface-0"},at={key:0,class:"flex flex-col items-center bg-white rounded-lg p-6 mb-6 container mx-auto"},rt={key:1,class:"mx-auto container"},nt={class:"bg-red-10 rounded-lg p-4"},lt={class:"flex justify-between items-center mb-4"},it={class:"text-lg font-semibold text-gray-700"},ct={class:"bg-white mx-auto"},dt={class:"bg-white grid grid-cols-12 gap-4"},ut={class:"col-span-12 md:col-span-9"},pt={class:"flex flex-wrap items-start gap-4"},mt=["src"],xt={class:"flex-grow min-w-0"},_t={class:"text-base sm:text-lg font-medium truncate"},gt={class:"text-gray-600 text-sm sm:text-base truncate"},bt={class:"font-bold"},ht={class:"text-right"},ft={class:"text-lg sm:text-xl font-semibold text-gray-900"},vt={class:"flex items-center"},yt=["onClick","disabled"],wt={class:"px-3 sm:px-4 text-sm sm:text-base"},kt=["onClick"],Ct={class:"flex flex-wrap items-center justify-between mt-4"},qt=["onClick"],Vt={class:"col-span-12 md:col-span-3"},Pt={class:"cart-total rounded-lg p4 bg-white shadow"},Qt={class:"text-gray-600"},St={class:"flex items-center justify-between my-4"},Tt={class:"relative inline-flex items-center cursor-pointer"},Bt={key:0,class:"my-2"},Mt={key:1,class:"flex justify-between text-gray-600"},Nt={class:"text-lg font-bold"},Ut={__name:"index",setup(jt){const{$formatPrice:N}=P();D();const p=L(),{$axios:j}=P();g("");const i=Q(()=>p.cartTotal),m=Q(()=>p.cartItems),c=g(!1),E=g({icon:"pi pi-home",route:"/dashboard"}),I=g([{label:"Quotations",route:"/cart"},{label:"Quotation",route:"/checkout"}]),d=o=>N(o),v=async(o,s)=>{await p.updateQuantity(o,s)},$=async o=>{await p.removeFromCart(o.id)},h=o=>o*.16,A=async()=>{console.log(m.value),products,console.log("cdsc",products);try{const o=await j.get("/product/quotation")}catch(o){console.error("Error fetching cart items:",o)}};return z(()=>{}),(o,s)=>{const K=G("router-link"),R=F,y=U;return r(),n("div",X,[t("div",Z,[f(R,{home:E.value,model:I.value,class:""},{item:b(({item:e,props:u})=>[e.route?(r(),H(K,{key:0,to:e.route,custom:""},{default:b(({href:x,navigate:_})=>[t("a",M({href:x},u.action,{onClick:_}),[t("span",{class:O([e.icon,"text-color"])},null,2),t("span",st,a(e.label),1)],16,tt)]),_:2},1032,["to"])):(r(),n("a",M({key:1,href:e.url,target:e.target},u.action),[t("span",ot,a(e.label),1)],16,et))]),_:1},8,["home","model"])]),m.value.length<1?(r(),n("div",at,[s[2]||(s[2]=t("img",{src:W,alt:"Empty Cart",class:"w-20 h-20 mb-4"},null,-1)),s[3]||(s[3]=t("h2",{class:"text-xl font-semibold text-gray-700"}," Your have no quotation ",-1)),s[4]||(s[4]=t("p",{class:"text-gray-500 text-sm mb-4"}," Browse our categories and discover our best deals! ",-1)),f(y,{to:"/dashboard"},{default:b(()=>s[1]||(s[1]=[t("button",{class:"bg-primary hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded"}," Start Shopping ",-1)])),_:1})])):(r(),n("div",rt,[t("div",nt,[t("div",lt,[t("h3",it," Quotation ("+a(m.value.length)+") ",1),f(y,{to:"/quotation"},{default:b(()=>s[5]||(s[5]=[t("a",{href:"#",class:"text-primary hover:text-orange-600 text-sm font-semibold flex items-center"},null,-1)])),_:1})]),t("div",ct,[t("div",dt,[t("div",ut,[(r(!0),n(S,null,T(m.value,e=>{var u,x,_,w,k,C,q,V;return r(),n("div",{class:"rounded-lg p-4 gap-3 pb-4 mb-2 border cursor-pointer bg-white shadow-sm",key:e.id},[t("div",pt,[t("img",{class:"w-16 h-16 sm:w-20 sm:h-20 object-contain",src:((_=(x=(u=e.productModel)==null?void 0:u.images)==null?void 0:x.find(l=>l.isPrimary))==null?void 0:_.uploadUrl)??((k=(w=e.images)==null?void 0:w.find(l=>l.isPrimary))==null?void 0:k.uploadUrl),alt:"Product Image"},null,8,mt),t("div",xt,[t("h2",_t,a(((C=e.productModel)==null?void 0:C.name)??e.name),1),t("p",gt,[(r(!0),n(S,null,T(e.features||((q=e.productModel)==null?void 0:q.features),l=>(r(),n("span",bt,a(l.description),1))),256))])]),t("div",ht,[t("p",ft," Ksh "+a(d(((V=e.productModel)==null?void 0:V.price)??e.price)),1),t("div",vt,[t("button",{onClick:l=>v(e.id,e.quantity-1),class:"bg-gray-300 px-2 sm:px-3 py-1 rounded-lg disabled:opacity-50",disabled:e.quantity<=1}," - ",8,yt),t("span",wt,a(e.quantity),1),t("button",{onClick:l=>v(e.id,e.quantity+1),class:"bg-primary text-white px-2 sm:px-3 py-1 rounded-lg"}," + ",8,kt)])]),t("div",Ct,[t("button",{onClick:l=>$(e),class:"text-red-500 flex items-center text-sm sm:text-base"},s[6]||(s[6]=[t("span",{class:"mr-2"}," Remove 🗑️",-1)]),8,qt)])])])}),128))]),t("div",Vt,[t("div",Pt,[s[11]||(s[11]=t("h3",{class:"text-lg font-semibold mb-2"},"Estimated Total",-1)),t("p",Qt," Subtotal: Ksh "+a(d(i.value)),1),t("div",St,[s[9]||(s[9]=t("label",{class:"text-gray-600"},"Apply VAT (16%)",-1)),t("label",Tt,[J(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),class:"sr-only peer"},null,512),[[Y,c.value]]),s[7]||(s[7]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-primary transition-colors"},null,-1)),s[8]||(s[8]=t("div",{class:"absolute left-1 top-1 bg-white border border-gray-300 w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5"},null,-1))])]),c.value?(r(),n("hr",Bt)):B("",!0),c.value?(r(),n("div",Mt,[s[10]||(s[10]=t("span",null,"VAT",-1)),t("span",null,"Ksh "+a(d(h(i.value))),1)])):B("",!0),s[12]||(s[12]=t("hr",{class:"my-2"},null,-1)),t("p",Nt," Total Estimate: Ksh "+a(d(i.value+(c.value?h(i.value):0))),1),t("button",{class:"w-full bg-primary text-white py-2 mt-4 rounded-lg hover:bg-secondary transition",onClick:A}," Request Quotation ("+a(d(i.value+(c.value?h(i.value):0)))+") ",1)])])])])])]))])}}};export{Ut as default};
