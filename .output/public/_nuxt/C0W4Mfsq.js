import{_ as W}from"./CwOlhz6d.js";import{s as q}from"./DJzw4iuH.js";import{F as G,_ as H,a as Q,T as Y,b as J,c as X,d as Z}from"./3dqSyJAp.js";import{T as $}from"./ngEjSa_i.js";import{_ as ee,f as te,S as oe,Q as se,r,R as re,y as D,q as x,c,b as y,a as t,F as N,m as R,G as I,I as M,o as i,d as ae,t as S}from"./BUDlA4ll.js";import"./CoXfKqwZ.js";import"./7raQZ81m.js";import"./BGEMfD1f.js";import"./BL3G2prY.js";import"./DtsxtzxN.js";import"./DjC0JdPm.js";import"./3MgOLFBG.js";import"./Cxz1vrXd.js";import"./4Q_ng1LK.js";import"./c0Tdd82Y.js";import"./D5Ul-VN7.js";import"./Dtb3Dwp9.js";const ne={name:"Dashboard",components:{FlashCard:G,CategoryCard:H,ProductCard:Q,TopCard:Y,Footer:J,FilterCard:X,TopDeal:$},props:{searchTerm:{type:String,default:""}},setup(p){te(()=>p.searchTerm,(e,s)=>{T.value=!0,v()}),oe(async()=>{v(),a(),await B()});const n=se(),C=r(1);r(1);const o=re(()=>[..._.value].sort(()=>Math.random()-.5).slice(0,6)),T=r(!1),f=r(null),b=r([20,80]),l=r(!1),d=r(!1),g=r({days:"00",hours:"00",minutes:"00",seconds:"00"}),w=e=>{n.push({path:`/products/${e.id}`})},P=r(new Date(new Date().getTime()+3*24*60*60*1e3)),a=()=>{const e=new Date().getTime(),s=P.value-e;s>0?g.value={days:Math.floor(s/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(s%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),g.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},O={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},h=e=>O[e]||"pi pi-question",m=r([]),k=r([]);D();const _=r([]),u=r(0),A=()=>{u.value=(u.value+1)%m.value.length},E=()=>{C.value++,v()},V=()=>{u.value=(u.value-1+m.value.length)%m.value.length},F=e=>{console.log("ca",e)},U=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(e):"0",j=e=>{f.value=[e.id],v()},L=e=>{u.value=e},v=async()=>{l.value=!0,d.value=!0;try{const{$axios:e}=D(),s={};p.searchTerm&&(s.searchTerm=p.searchTerm),f.value&&(s.categoryIds=f.value);const z=await e.get("/product/product-models",{params:{...s,page:C.value,limit:10}});l.value=!1,d.value=!1,_.value=[..._.value,...z.data.results]}catch(e){console.error("Error fetching products:",e),l.value=!1,d.value=!1}},B=async()=>{const{$axios:e}=D();try{const s=await e.get("/product/categories",{});k.value=s.data}catch(s){console.error("Error fetching products:",s)}},K=r([{breakpoint:"1400px",numVisible:4,numScroll:4},{breakpoint:"1199px",numVisible:4,numScroll:4},{breakpoint:"767px",numVisible:2,numScroll:2},{breakpoint:"475px",numVisible:1,numScroll:1}]);return{images:m,currentIndex:u,nextSlide:A,prevSlide:V,goToSlide:L,categories:k,products:_,responsiveOptions:K,getItems:F,getSeverity:e=>{switch(e){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:b,filter:T,showMoreProducts:E,fetching:l,fetchingMore:d,formatPrice:U,randomizedProducts:o,goToProductPage:w,getIcon:h,getCategoryProducts:j}}},ie={class:"container mx-auto my-10 pa-10"},ce={class:"p-4 rounded-md"},le={class:"flex overflow-x-auto gap-4 p-2"},de=["onClick"],ue={class:"relative"},me=["src","alt"],pe={class:"text-sm font-medium mt-2 truncate"},fe={class:"text-lg font-semibold text-gray-900"},ge={class:"text-gray-500 text-xs line-through"},he={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},_e={class:"flex"},ve={class:"w-full"},xe={key:0,class:"text-center mt-6"},ye={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Se={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Ce={key:3,class:"flex justify-center py-8"};function Te(p,n,C,o,T,f){const b=x("TopCard"),l=x("TopDeal"),d=x("FilterCard"),g=x("ProductCard"),w=q,P=W;return i(),c("div",ie,[y(b,{categories:o.categories},null,8,["categories"]),y(l),t("section",null,[t("div",ce,[n[1]||(n[1]=t("div",{class:"flex justify-between items-center mb-4 px-2"},[t("h2",{class:"text-lg font-semibold"},"Top selling items")],-1)),t("div",le,[(i(!0),c(N,null,R(o.randomizedProducts,(a,O)=>{var h;return i(),c("div",{key:O,class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:m=>o.goToProductPage(a)},[t("div",ue,[t("img",{src:(h=a.images[0])==null?void 0:h.optimizeUrl,alt:a.name,class:"w-full h-36 object-cover rounded-md"},null,8,me)]),ae(" "+S(a.product.name)+" ",1),t("h3",pe,S(a.name),1),t("p",fe,S(o.formatPrice(a.price)),1),t("p",ge,S(a.oldPrice),1)],8,de)}),128))])])]),t("section",he,[n[4]||(n[4]=t("div",{class:"flex justify-between items-center mb-4"},[t("h2",{class:"text-xl font-bold"},"Explore Our Products"),t("div",{class:"flex space-x-2"},[t("button",{class:"bg-red-500 text-white px-4 py-2"},"View All")])],-1)),t("div",_e,[o.filter?(i(),I(d,{key:0})):M("",!0),t("div",ve,[o.fetching&&o.products.length<1?(i(),c("div",xe,n[2]||(n[2]=[t("div",{class:"relative flex justify-center items-center"},[t("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),t("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):o.products.length==0?(i(),c("div",ye,n[3]||(n[3]=[t("img",{src:Z,alt:"No items found",class:"h-56 w-56"},null,-1),t("p",{class:"pt-6"},"No items found",-1)]))):(i(),c("div",Se,[(i(!0),c(N,null,R(o.products,a=>(i(),I(g,{key:a.id,item:a},null,8,["item"]))),128))])),o.products.length!=0?(i(),c("div",Ce,[y(w,{type:"button",label:"Show More",icon:"pi pi-sync",loading:o.fetchingMore,onClick:n[0]||(n[0]=a=>o.showMoreProducts())},null,8,["loading"])])):M("",!0)])])]),y(P)])}const Ke=ee(ne,[["render",Te],["__scopeId","data-v-8fa9ea18"]]);export{Ke as default};
