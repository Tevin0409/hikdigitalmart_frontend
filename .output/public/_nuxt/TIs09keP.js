import{_ as X}from"./C6WL5GiY.js";import Z from"./Bfk8XPW3.js";import tt from"./B3fgAOjB.js";import{_ as et,F as ot,T as st,a as rt,b as at,c as nt,d as ct}from"./BlvnBFXI.js";import{_ as it,c as l,a,b as S,w as A,p as lt,F as dt,r as ut,G as mt,D as pt,j as e,B as ft,J as ht,x,z as I,o as c,l as E,A as F,m as gt,t as V}from"./CoyVHb3q.js";import"./eeer9vDV.js";import"./Be1fzYNM.js";import"./3A9dI5Hm.js";import"./B-x3AKLp.js";import"./DBllE-4O.js";import"./D3b98cz8.js";import"./CyGyADv7.js";import"./C4furr1e.js";import"./DmfvTtO6.js";import"./8x9NGM2Z.js";import"./DVs2OJRz.js";import"./DGEOgZpe.js";import"./DwP0r8OC.js";import"./DTr9jwMw.js";import"./BU7HOwbj.js";import"./Bo6vk6Ju.js";import"./BM2ClVBI.js";import"./VVXzHwl5.js";import"./CnELaeCv.js";import"./C1nQqg27.js";import"./5eePZ1dp.js";import"./BI9Qtie8.js";import"./D7IbExkG.js";import"./BaLwuUdj.js";import"./DBaRqsmy.js";import"./AlfRBbHE.js";import"./BxSF_YJs.js";import"./BeolfjG4.js";import"./Caw57Z5n.js";const _t={name:"Dashboard",components:{FlashCard:nt,CategoryCard:at,ProductCard:rt,TopCard:st,Footer:ot,FilterCard:et},props:{searchTerm:{type:String,default:""}},setup(D){mt(()=>D.searchTerm,(t,s)=>{b.value=!0,p()}),pt(async()=>{p(),U(),await J()});const o=ht(),C=e(1);e(1);const n=ft(()=>[...y.value].sort(()=>Math.random()-.5).slice(0,6)),b=e(!1),N=e(null),f=e([]),w=e([20,80]),d=e(!1),m=e(!1),T=o.params.id,h=o.query.searchTerm,r=e({days:"00",hours:"00",minutes:"00",seconds:"00"}),g=e({icon:"pi pi-home",route:"/dashboard"}),k=e([{label:"Products",route:"/dashboard"},{label:`Seach Results for ${h}`,route:"/checkout"}]),O=t=>{o.push({path:`/products/${t.id}`})},B=e(new Date(new Date().getTime()+3*24*60*60*1e3)),U=()=>{const t=new Date().getTime(),s=B.value-t;s>0?r.value={days:Math.floor(s/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(s%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),r.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},L={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},j=t=>L[t]||"pi pi-question",_=e([]),R=e([]),{$axios:Nt}=x(),y=e([]),u=e(0),K=()=>{u.value=(u.value+1)%_.value.length},$=()=>{C.value++,p()},q=()=>{u.value=(u.value-1+_.value.length)%_.value.length},z=t=>{console.log("ca",t)},W=t=>t?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(t):"0",G=t=>{N.value=[t.id],p()},H=t=>{u.value=t},p=async()=>{d.value=!0,m.value=!0;try{const{$axios:t}=x(),s=o.params.id,v=o.query.searchTerm||"",i={};v&&(i.searchTerm=v.slice(0,5)),s&&(i.categoryId=[s]);const P=await t.get("/product/product-models",{params:{...i,page:C.value,limit:10}});d.value=!1,y.value=P.data.results,await M(),console.log(y.value,"products")}catch(t){console.error("Error fetching products:",t)}finally{d.value=!1,m.value=!1}},M=async()=>{try{const{$axios:t}=x(),s=o.params.id,v=o.query.productId,i={};s&&(i.categoryId=s,i.productId=v);const P=await t.get("/product/features",{params:{...i}});f.value=P.data.map(Q=>({...Q,selected:!1}))}catch(t){console.error("Error fetching products:",t)}finally{}},J=async()=>{const{$axios:t}=x();try{const s=await t.get("/product/categories",{});R.value=s.data}catch(s){console.error("Error fetching products:",s)}},Y=e([{breakpoint:"1400px",numVisible:2,numScroll:1},{breakpoint:"1199px",numVisible:3,numScroll:1},{breakpoint:"767px",numVisible:2,numScroll:1},{breakpoint:"575px",numVisible:1,numScroll:1}]);return{images:_,currentIndex:u,nextSlide:K,prevSlide:q,goToSlide:H,categories:R,products:y,responsiveOptions:Y,getItems:z,getSeverity:t=>{switch(t){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:w,filter:b,showMoreProducts:$,fetching:d,fetchingMore:m,formatPrice:W,randomizedProducts:n,goToProductPage:O,getIcon:j,getCategoryProducts:G,getProduct:p,getFeatures:M,features:f,category:T,searchTer:h,home:g,items:k}}},yt={class:"container mx-auto my-10 pa-10"},vt={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},St=["href","onClick"],xt={class:"text-primary font-semibold"},Ct=["href","target"],bt={class:"text-surface-700 dark:text-surface-0"},wt={class:"flex flex-col sm:flex-row"},Tt={class:"w-full"},kt={key:0,class:"text-center mt-6"},Ot={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Pt={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},It={key:3,class:"flex justify-center py-8"};function Dt(D,o,C,n,b,N){const f=I("router-link"),w=tt,d=I("FilterCard"),m=I("ProductCard"),T=Z,h=X;return c(),l("div",yt,[a("section",vt,[S(w,{home:n.home,model:n.items},{item:A(({item:r,props:g})=>[r.route?(c(),E(f,{key:0,to:r.route,custom:""},{default:A(({href:k,navigate:O})=>[a("a",F({href:k},g.action,{onClick:O}),[a("span",{class:gt([r.icon,"text-color"])},null,2),a("span",xt,V(r.label),1)],16,St)]),_:2},1032,["to"])):(c(),l("a",F({key:1,href:r.url,target:r.target},g.action),[a("span",bt,V(r.label),1)],16,Ct))]),_:1},8,["home","model"]),o[3]||(o[3]=a("div",{class:"flexjustify-between items-center mb-4"},[a("div",{class:"flex space-x-2"})],-1)),a("div",wt,[S(d,{features:n.features,class:"w-full sm:w-auto mb-4 sm:mb-0"},null,8,["features"]),a("div",Tt,[n.fetching&&n.products.length<1?(c(),l("div",kt,o[1]||(o[1]=[a("div",{class:"relative flex justify-center items-center"},[a("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),a("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):n.products.length==0?(c(),l("div",Ot,o[2]||(o[2]=[a("img",{src:ct,alt:"No items found",class:"h-56 w-56"},null,-1),a("p",{class:"pt-6"},"No items found",-1)]))):(c(),l("div",Pt,[(c(!0),l(dt,null,ut(n.products,r=>(c(),E(m,{key:r.id,item:r},null,8,["item"]))),128))])),n.products.length!=0?(c(),l("div",It,[S(T,{type:"button",label:"Show More",icon:"pi pi-sync",loading:n.fetchingMore,onClick:o[0]||(o[0]=r=>n.showMoreProducts())},null,8,["loading"])])):lt("",!0)])])]),S(h)])}const pe=it(_t,[["render",Dt],["__scopeId","data-v-1298c9f3"]]);export{pe as default};
