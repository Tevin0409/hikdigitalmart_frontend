import{B as M,a9 as S,L as D,K as F,ax as U,aj as T,v as p,a1 as V,o as l,c as d,a as s,F as k,m as P,N as h,G as O,u as _,H as A,I as v,t as a,_ as C,x as I,y,J as N,z as B,V as w,b as x,d as L,w as E}from"./BUDlA4ll.js";import{R as K}from"./BGEMfD1f.js";import{s as z}from"./7raQZ81m.js";import{s as j}from"./BL3G2prY.js";import{s as W}from"./DJzw4iuH.js";import{_ as R}from"./CoXfKqwZ.js";import{s as q}from"./DxAoVQKb.js";var G=function(e){var t=e.dt;return`
.p-tabmenu {
    overflow-x: auto;
}

.p-tabmenu-tablist {
    display: flex;
    margin: 0;
    padding: 0;
    list-style-type: none;
    background: `.concat(t("tabmenu.tablist.background"),`;
    border-style: solid;
    border-color: `).concat(t("tabmenu.tablist.border.color"),`;
    border-width: `).concat(t("tabmenu.tablist.border.width"),`;
    position: relative;
}

.p-tabmenu-item-link {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    background: `).concat(t("tabmenu.item.background"),`;
    border-style: solid;
    border-width: `).concat(t("tabmenu.item.border.width"),`;
    border-color: `).concat(t("tabmenu.item.border.color"),`;
    color: `).concat(t("tabmenu.item.color"),`;
    padding: `).concat(t("tabmenu.item.padding"),`;
    font-weight: `).concat(t("tabmenu.item.font.weight"),`;
    transition: background `).concat(t("tabmenu.transition.duration"),", border-color ").concat(t("tabmenu.transition.duration"),", color ").concat(t("tabmenu.transition.duration"),", outline-color ").concat(t("tabmenu.transition.duration"),", box-shadow ").concat(t("tabmenu.transition.duration"),`;
    margin: `).concat(t("tabmenu.item.margin"),`;
    outline-color: transparent;
    gap: `).concat(t("tabmenu.item.gap"),`;
}

.p-tabmenu-item-link:focus-visible {
    z-index: 1;
    box-shadow: `).concat(t("tabmenu.item.focus.ring.shadow"),`;
    outline: `).concat(t("tabmenu.item.focus.ring.width")," ").concat(t("tabmenu.item.focus.ring.style")," ").concat(t("tabmenu.item.focus.ring.color"),`;
    outline-offset: `).concat(t("tabmenu.item.focus.ring.offset"),`;
}

.p-tabmenu-item-icon {
    color: `).concat(t("tabmenu.item.icon.color"),`;
    transition: background `).concat(t("tabmenu.transition.duration"),", border-color ").concat(t("tabmenu.transition.duration"),", color ").concat(t("tabmenu.transition.duration"),", outline-color ").concat(t("tabmenu.transition.duration"),", box-shadow ").concat(t("tabmenu.transition.duration"),`;
}

.p-tabmenu-item-label {
    line-height: 1;
}

.p-tabmenu-item:not(.p-tabmenu-item-active):not(.p-disabled):hover .p-tabmenu-item-link {
    background: `).concat(t("tabmenu.item.hover.background"),`;
    border-color: `).concat(t("tabmenu.item.hover.border.color"),`;
    color: `).concat(t("tabmenu.item.hover.color"),`;
}

.p-tabmenu-item:not(.p-tabmenu-item-active):not(.p-disabled):hover .p-tabmenu-item-icon {
    color: `).concat(t("tabmenu.item.icon.hover.color"),`;
}

.p-tabmenu-item-active .p-tabmenu-item-link {
    background: `).concat(t("tabmenu.item.active.background"),`;
    border-color: `).concat(t("tabmenu.item.active.border.color"),`;
    color: `).concat(t("tabmenu.item.active.color"),`;
}

.p-tabmenu-item-active .p-tabmenu-item-icon {
    color: `).concat(t("tabmenu.item.icon.active.color"),`;
}

.p-tabmenu-active-bar {
    z-index: 1;
    display: block;
    position: absolute;
    bottom: `).concat(t("tabmenu.active.bar.bottom"),`;
    height: `).concat(t("tabmenu.active.bar.height"),`;
    background: `).concat(t("tabmenu.active.bar.background"),`;
    transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
}

.p-tabmenu::-webkit-scrollbar {
    display: none;
}
`)},H={root:"p-tabmenu p-component",tablist:"p-tabmenu-tablist",item:function(e){var t=e.instance,c=e.index,i=e.item;return["p-tabmenu-item",{"p-tabmenu-item-active":t.d_activeIndex===c,"p-disabled":t.disabled(i)}]},itemLink:"p-tabmenu-item-link",itemIcon:"p-tabmenu-item-icon",itemLabel:"p-tabmenu-item-label",activeBar:"p-tabmenu-active-bar"},Y=M.extend({name:"tabmenu",theme:G,classes:H}),$={name:"BaseTabMenu",extends:z,props:{model:{type:Array,default:null},activeIndex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Y,provide:function(){return{$pcTabMenu:this,$parentInstance:this}}},J={name:"TabMenu",extends:$,inheritAttrs:!1,emits:["update:activeIndex","tab-change"],data:function(){return{d_activeIndex:this.activeIndex}},watch:{activeIndex:{flush:"post",handler:function(e){this.d_activeIndex=e,this.updateInkBar()}}},mounted:function(){var e=this;this.$nextTick(function(){e.updateInkBar()});var t=this.findActiveItem();t&&(t.tabIndex="0")},updated:function(){this.updateInkBar()},methods:{getPTOptions:function(e,t,c){return this.ptm(e,{context:{item:t,index:c}})},onItemClick:function(e,t,c){if(this.disabled(t)){e.preventDefault();return}t.command&&t.command({originalEvent:e,item:t}),c!==this.d_activeIndex&&(this.d_activeIndex=c,this.$emit("update:activeIndex",this.d_activeIndex)),this.$emit("tab-change",{originalEvent:e,index:c})},onKeydownItem:function(e,t,c){switch(e.code){case"ArrowRight":{this.navigateToNextItem(e.target),e.preventDefault();break}case"ArrowLeft":{this.navigateToPrevItem(e.target),e.preventDefault();break}case"Home":{this.navigateToFirstItem(e.target),e.preventDefault();break}case"End":{this.navigateToLastItem(e.target),e.preventDefault();break}case"Space":case"NumpadEnter":case"Enter":{this.onItemClick(e,t,c),e.preventDefault();break}case"Tab":{this.onTabKey();break}}},navigateToNextItem:function(e){var t=this.findNextItem(e);t&&this.setFocusToMenuitem(e,t)},navigateToPrevItem:function(e){var t=this.findPrevItem(e);t&&this.setFocusToMenuitem(e,t)},navigateToFirstItem:function(e){var t=this.findFirstItem(e);t&&this.setFocusToMenuitem(e,t)},navigateToLastItem:function(e){var t=this.findLastItem(e);t&&this.setFocusToMenuitem(e,t)},findNextItem:function(e){var t=e.parentElement.nextElementSibling;return t?S(t,"data-p-disabled")===!0?this.findNextItem(t.children[0]):t.children[0]:null},findPrevItem:function(e){var t=e.parentElement.previousElementSibling;return t?S(t,"data-p-disabled")===!0?this.findPrevItem(t.children[0]):t.children[0]:null},findFirstItem:function(){var e=D(this.$refs.nav,'[data-pc-section="item"][data-p-disabled="false"]');return e?e.children[0]:null},findLastItem:function(){var e=F(this.$refs.nav,'[data-pc-section="item"][data-p-disabled="false"]');return e?e[e.length-1].children[0]:null},findActiveItem:function(){var e=D(this.$refs.nav,'[data-pc-section="item"][data-p-disabled="false"][data-p-active="true"]');return e?e.children[0]:null},setFocusToMenuitem:function(e,t){e.tabIndex="-1",t.tabIndex="0",t.focus()},onTabKey:function(){var e=D(this.$refs.nav,'[data-pc-section="item"][data-p-disabled="false"][data-p-active="true"]'),t=D(this.$refs.nav,'[data-pc-section="itemlink"][tabindex="0"]');t!==e.children[0]&&(e&&(e.children[0].tabIndex="0"),t.tabIndex="-1")},visible:function(e){return typeof e.visible=="function"?e.visible():e.visible!==!1},disabled:function(e){return typeof e.disabled=="function"?e.disabled():e.disabled===!0},label:function(e){return typeof e.label=="function"?e.label():e.label},updateInkBar:function(){for(var e=this.$refs.nav.children,t=!1,c=0;c<e.length;c++){var i=e[c];S(i,"data-p-active")&&(this.$refs.inkbar.style.width=U(i)+"px",this.$refs.inkbar.style.left=T(i).left-T(this.$refs.nav).left+"px",t=!0)}t||(this.$refs.inkbar.style.width="0px",this.$refs.inkbar.style.left="0px")},getMenuItemProps:function(e,t){var c=this;return{action:p({class:this.cx("itemLink"),tabindex:-1,onClick:function(r){return c.onItemClick(r,e,t)},onKeyDown:function(r){return c.onKeydownItem(r,e,t)}},this.getPTOptions("itemLink",e,t)),icon:p({class:[this.cx("itemIcon"),e.icon]},this.getPTOptions("itemIcon",e,t)),label:p({class:this.cx("itemLabel")},this.getPTOptions("itemLabel",e,t))}}},directives:{ripple:K}},X=["aria-labelledby","aria-label"],Q=["onClick","onKeydown","data-p-active","data-p-disabled"],Z=["href","target","aria-label","aria-disabled"];function ee(n,e,t,c,i,r){var f=V("ripple");return l(),d("div",p({class:n.cx("root")},n.ptmi("root")),[s("ul",p({ref:"nav",class:n.cx("tablist"),role:"menubar","aria-labelledby":n.ariaLabelledby,"aria-label":n.ariaLabel},n.ptm("tablist")),[(l(!0),d(k,null,P(n.model,function(u,o){return l(),d(k,{key:r.label(u)+"_"+o.toString()},[r.visible(u)?(l(),d("li",p({key:0,ref_for:!0,ref:"tab",class:[n.cx("item",{item:u,index:o}),u.class],role:"presentation",onClick:function(m){return r.onItemClick(m,u,o)},onKeydown:function(m){return r.onKeydownItem(m,u,o)}},r.getPTOptions("item",u,o),{"data-p-active":i.d_activeIndex===o,"data-p-disabled":r.disabled(u)}),[n.$slots.item?(l(),O(A(n.$slots.item),{key:1,item:u,index:o,active:o===i.d_activeIndex,label:r.label(u),props:r.getMenuItemProps(u,o)},null,8,["item","index","active","label","props"])):h((l(),d("a",p({key:0,ref_for:!0,ref:"tabLink",role:"menuitem",href:u.url,class:n.cx("itemLink"),target:u.target,"aria-label":r.label(u),"aria-disabled":r.disabled(u),tabindex:-1},r.getPTOptions("itemLink",u,o)),[n.$slots.itemicon?(l(),O(A(n.$slots.itemicon),{key:0,item:u,class:_(n.cx("itemIcon"))},null,8,["item","class"])):u.icon?(l(),d("span",p({key:1,class:[n.cx("itemIcon"),u.icon],ref_for:!0},r.getPTOptions("itemIcon",u,o)),null,16)):v("",!0),s("span",p({class:n.cx("itemLabel"),ref_for:!0},r.getPTOptions("itemLabel",u,o)),a(r.label(u)),17)],16,Z)),[[f]])],16,Q)):v("",!0)],64)}),128)),s("li",p({ref:"inkbar",role:"none",class:n.cx("activeBar")},n.ptm("activeBar")),null,16)],16,X)],16)}J.render=ee;const te={data(){return{showPasswordFields:!1,passwords:{oldPassword:"",newPassword:"",confirmNewPassword:""},selectedFilter:"All",filters:["All","Pending","Delivered","Cancelled"],removeItem:!1,loadingAdd:!1,home:{icon:"pi pi-home"},items:[{label:"Home",route:"/"},{label:"My Account",route:"/profile"}],activeSection:"profile",user:{firstName:"",lastName:"",email:"",address:"",phoneNumber:"",createdAt:""},orders:[],wishlist:[],loading:!1,loadingSave:!1}},computed:{filteredOrders(){return this.selectedFilter==="All"?this.orders:this.orders.filter(n=>n.status===this.selectedFilter)}},async mounted(){await this.getUserData(),await this.getWishList(),await this.getOrders()},methods:{async updatePassword(){this.loading=!0;const n=I();try{const e={newPassword:this.passwords.newPassword,oldPassword:this.passwords.oldPassword,confirmNewPassword:this.passwords.confirmNewPassword},t=await n.updatePassword(e);this.$toast.add({severity:"success",summary:t.data.message+"Please login to continue",group:"br",life:3e3}),this.loading=!1,n.logout()}catch(e){this.loading=!1,this.$toast.add({severity:"error",summary:e,group:"br",life:3e3})}},async updateUser(){const n=I();try{this.loadingSave=!0;const e={firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,phoneNumber:this.user.phoneNumber},t=await n.updateUser(e,this.user.id);this.$toast.add({severity:"success",summary:"Details updated successfully",group:"br",life:3e3}),this.loadingSave=!1}catch(e){this.loadingSave=!1,this.$toast.add({severity:"error",summary:e,group:"br",life:3e3})}},getProductImage(n){var e,t;return((t=(e=n==null?void 0:n.productModel)==null?void 0:e.images)==null?void 0:t.length)>0?n.productModel.images[0].optimizeUrl:(console.log("Using fallback image"),"https://media.istockphoto.com/id/1410977641/photo/high-technology-security-monitoring-system-cctv-camera.jpg?s=612x612&w=0&k=20&c=ueVgTwwn5Xq-S0Tz6Wfj9sILEubWxURkzkvVrzpSYRI=")},formattedPrice(n){const{$formatPrice:e}=y();return e(n)},formatDate(n){return new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},async getOrders(){const e=await N().getOrders();this.orders=e},async removeWish(n){const{$axios:e}=y();this.removeItem=!0;try{const t=await e.post(`/product/wishlist/remove/${productID}`);this.removeItem=!1}catch{this.removeItem=!1}},async addToCart(n){const{$axios:e}=y();this.loadingAdd=!0,setTimeout(()=>{this.loadingAdd=!1},2e3);try{const t={productId:n.id,quantity:1},c=await e.post("/product/cart/add",t);this.loadingAdd=!1}catch{this.loadingAdd=!1}},async getWishList(){const{$axios:n}=y();try{const e=await n.get("/product/wishlist");this.wishlist=e.data}catch(e){console.error(e)}},async getUserData(){const n=I();this.user=n.user},logout(){I().logout()}}},se={class:"container mx-auto"},ne={class:"flex flex-col md:flex-row"},oe={class:"w-full bg-white border p-4"},ie={key:0},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex justify-between mt-6"},le={class:"mt-6"},de={key:0,class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"col-span-1 md:col-span-2 flex justify-end mt-4"},ue={key:1},me={class:"mt-4 flex flex-col md:flex-row items-center md:items-start"},pe={class:"ml-4"},be={class:"text-gray-600"},fe={key:2},ge={class:"p-4 bg-gray-100"},he={class:"flex space-x-4 mb-4 overflow-x-auto"},ve=["onClick"],ye={class:"flex justify-between items-center"},we={class:"text-sm text-gray-500"},xe={class:"mt-2 flex flex-col md:flex-row items-center md:items-start"},ke=["src"],Ie={class:"ml-0 md:ml-4 text-center md:text-left"},Pe={class:"text-red-600 font-semibold"},_e={class:"text-gray-700"},De={key:0,class:"text-blue-600"},Se={class:"text-gray-800 font-semibold mt-1"};function Ne(n,e,t,c,i,r){const f=W,u=j;return l(),d("div",se,[s("div",ne,[s("main",oe,[i.activeSection==="profile"?(l(),d("div",ie,[e[17]||(e[17]=s("h2",{class:"text-xl font-bold mb-4 text-red-500"},"Edit Your Profile",-1)),s("form",{onSubmit:e[8]||(e[8]=B((...o)=>r.updateUser&&r.updateUser(...o),["prevent"]))},[s("div",re,[s("div",null,[e[9]||(e[9]=s("label",null,"First Name",-1)),h(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.firstName=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.user.firstName]])]),s("div",null,[e[10]||(e[10]=s("label",null,"Last Name",-1)),h(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.lastName=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.user.lastName]])]),s("div",null,[e[11]||(e[11]=s("label",null,"Email",-1)),h(s("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>i.user.email=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.user.email]])]),s("div",null,[e[12]||(e[12]=s("label",null,"Phone Number",-1)),h(s("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>i.user.phoneNumber=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.user.phoneNumber]])])]),s("div",ae,[e[13]||(e[13]=s("button",{type:"button",class:"border px-4 py-2 w-1/2 md:w-auto"}," Cancel ",-1)),x(f,{class:"bg-primary text-white py-3 rounded hover:bg-secondary mt-4",type:"submit",label:"Save Changes",loading:i.loadingSave},null,8,["loading"])]),s("div",le,[s("button",{type:"button",onClick:e[4]||(e[4]=o=>i.showPasswordFields=!i.showPasswordFields),class:"bg-secondary text-white px-4 py-2 w-full md:w-auto"}," Change Password "),i.showPasswordFields?(l(),d("div",de,[s("div",null,[e[14]||(e[14]=s("label",null,"Old Password",-1)),h(s("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=o=>i.passwords.oldPassword=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.passwords.oldPassword]])]),s("div",null,[e[15]||(e[15]=s("label",null,"New Password",-1)),h(s("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=o=>i.passwords.newPassword=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.passwords.newPassword]])]),s("div",null,[e[16]||(e[16]=s("label",null,"Confirm Password",-1)),h(s("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=o=>i.passwords.confirmNewPassword=o),class:"border w-full p-2 mt-1"},null,512),[[w,i.passwords.confirmNewPassword]])]),s("div",ce,[x(f,{class:"bg-primary text-white py-3 rounded hover:bg-secondary mt-4",type:"button",label:"Update Password",loading:i.loading,onClick:r.updatePassword},null,8,["loading","onClick"])])])):v("",!0)])],32)])):v("",!0),i.activeSection==="paymentOptions"?(l(),d("div",ue,[e[20]||(e[20]=s("h2",{class:"text-xl font-bold mb-4 text-red-500"},"Payment Method",-1)),s("div",me,[e[19]||(e[19]=s("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/M-PESA_LOGO-01.svg/512px-M-PESA_LOGO-01.svg.png?20191120100524",class:"w-1/2 md:w-1/4",alt:"Mpesa Logo"},null,-1)),s("div",pe,[e[18]||(e[18]=s("h3",{class:"font-bold mb-2"},"Mpesa",-1)),s("p",be,"Mobile Number: "+a(i.user.phoneNumber),1)])])])):v("",!0),i.activeSection==="orders"?(l(),d("div",fe,[e[21]||(e[21]=s("h2",{class:"text-xl font-bold mb-4 text-red-500"},"My Orders",-1)),s("div",ge,[s("div",he,[(l(!0),d(k,null,P(i.filters,o=>(l(),d("button",{key:o,onClick:b=>i.selectedFilter=o,class:_(["px-4 py-2 rounded-full border whitespace-nowrap",i.selectedFilter===o?"bg-red-100 text-red-600":"bg-white text-gray-600"])},a(o),11,ve))),128))]),(l(!0),d(k,null,P(r.filteredOrders,(o,b)=>{var m,g;return l(),d("div",{key:b,class:"bg-white shadow-md rounded-lg mb-4 p-4"},[s("div",ye,[s("span",{class:_(["px-3 py-1 text-xs rounded-full",{"bg-yellow-200 text-yellow-800":o.status==="Pending","bg-green-100 text-green-600":o.status==="Delivered","bg-gray-300 text-gray-700":o.status==="Cancelled"}])},a(o.status),3),s("span",we,a(r.formatDate(o.createdAt)),1)]),s("div",xe,[s("img",{src:(g=(m=o.orderItems[0])==null?void 0:m.productModel.images[0])==null?void 0:g.optimizeUrl,alt:"Product Image",class:"w-16 h-16 rounded-md object-cover"},null,8,ke),s("div",Ie,[s("p",Pe," Order ID: "+a(o.id.slice(0,8)),1),s("p",_e,[L(a(o.orderItems[0].productModel.name)+" ",1),o.orderItems.length>1?(l(),d("span",De," & "+a(o.orderItems.length-1)+" more items",1)):v("",!0)]),s("p",Se," KES "+a(r.formattedPrice(o.total)),1)])])])}),128))])])):v("",!0)])]),x(u,{position:"bottom-right",group:"br"})])}const ht=C(te,[["render",Ne]]),Te=""+new URL("no-order.CkeRJY7F.png",import.meta.url).href,Oe={data(){return{orderDetails:{},detailedView:!1,selectedFilter:"All",filters:["All","Awaiting Payment","Pending","Delivered","Cancelled"],removeItem:!1,loadingAdd:!1,home:{icon:"pi pi-home"},items:[{label:"Home",route:"/"},{label:"My Account",route:"/profile"}],activeSection:"profile",user:{firstName:"",lastName:"",email:"",address:"",phoneNumber:"",createdAt:""},orders:[],wishlist:[],fetching:!1}},computed:{filteredOrders(){return this.selectedFilter==="All"?this.orders:this.orders.filter(n=>n.status===this.selectedFilter)}},async mounted(){await this.getUserData(),await this.getWishList(),await this.getOrders()},methods:{statusStyle(n){switch(n.toLowerCase()){case"awaiting payment":return{color:"#FFA500",icon:"pi pi-hourglass"};case"pending":return{color:"bg-primary",icon:"pi pi-clock"};case"delivered":return{color:"#28A745",icon:"pi pi-check"};case"cancelled":return{color:"#DC3545",icon:"pi pi-times"};default:return{color:"#6C757D",icon:"pi pi-info-circle"}}},async viewOrderDetails(n){this.fetching=!0;const e=N();try{const t=await e.getOrderDetails(n);console.log("Order details:",t);const c=t.data;this.orderDetails=c,this.detailedView=!0,this.fetching=!1}catch(t){this.fetching=!1,console.error("Error fetching order details:",t)}},getProductImage(n){var e,t,c;return console.log("Order Item:",n),((t=(e=n==null?void 0:n.productModel)==null?void 0:e.images)==null?void 0:t.length)>0?(console.log("Image found:",(c=n.productModel.images[0])==null?void 0:c.optimizeUrl),n.productModel.images[0].optimizeUrl):(console.log("Using fallback image"),"https://media.istockphoto.com/id/1410977641/photo/high-technology-security-monitoring-system-cctv-camera.jpg?s=612x612&w=0&k=20&c=ueVgTwwn5Xq-S0Tz6Wfj9sILEubWxURkzkvVrzpSYRI=")},formattedPrice(n){const{$formatPrice:e}=y();return e(n)},formatDate(n){return new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})},async getOrders(){this.fetching=!0;const e=await N().getOrders();this.fetching=!1,this.orders=e},async removeWish(n){const{$axios:e}=y();this.removeItem=!0;try{const t=await e.post(`/product/wishlist/remove/${productID}`);this.removeItem=!1}catch{this.removeItem=!1}},async addToCart(n){const{$axios:e}=y();this.loadingAdd=!0,setTimeout(()=>{this.loadingAdd=!1},2e3);try{const t={productId:n.id,quantity:1},c=await e.post("/product/cart/add",t);this.loadingAdd=!1}catch{this.loadingAdd=!1}},async getWishList(){const{$axios:n}=y();try{const e=await n.get("/product/wishlist");this.wishlist=e.data}catch(e){console.error(e)}},async getUserData(){const n=I();this.user=n.user},logout(){I().logout()}}},Ae={class:""},Ce={key:0,class:"flex flex-col"},Le={class:"p-4"},Me={class:"flex space-x-4 mb-4 overflow-x-auto"},Fe=["onClick"],Ue={key:0,class:"max-h-[600px] overflow-y-auto"},Ve=["onClick"],Be={class:"flex justify-between items-center"},Ee={class:"text-sm text-gray-500"},Ke={class:"mt-2 flex flex-col md:flex-row items-center md:items-start"},ze=["src"],je={class:"ml-0 md:ml-4 text-center md:text-left"},We={class:"text-red-600 font-semibold"},Re={class:"text-gray-700"},qe={key:0,class:"text-blue-600"},Ge={class:"text-gray-800 font-semibold mt-1"},He={key:1,class:"flex flex-col items-center justify-center min-h-[50vh] text-center"},Ye={key:1},$e={key:0},Je={key:1},Xe={class:"p-6 bg-white rounded-lg"},Qe={class:"flex justify-between"},Ze={class:"flex items-center gap-2"},et={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},tt={class:"space-y-4"},st={class:"flex items-center space-x-4"},nt=["src"],ot={class:"text-lg font-semibold"},it={class:"text-gray-500"},rt={class:"font-semibold"},at={class:"font-semibold"};function lt(n,e,t,c,i,r){const f=q,u=R;return l(),d("div",Ae,[!i.detailedView&&!i.fetching?(l(),d("div",Ce,[s("div",Le,[s("div",Me,[(l(!0),d(k,null,P(i.filters,o=>(l(),d("button",{key:o,onClick:b=>i.selectedFilter=o,class:_(["px-4 py-2 rounded-full border whitespace-nowrap",i.selectedFilter===o?"bg-red-100 text-red-600":"bg-white text-gray-600"])},a(o),11,Fe))),128))]),x(f),r.filteredOrders.length>0?(l(),d("div",Ue,[(l(!0),d(k,null,P(r.filteredOrders,(o,b)=>{var m,g;return l(),d("div",{key:b,class:"border rounded-lg mb-4 p-4 cursor-pointer",onClick:dt=>r.viewOrderDetails(o)},[s("div",Be,[s("span",{class:_(["px-3 py-1 text-xs rounded-full",{"bg-yellow-400 text-yellow-800":o.status==="Pending","bg-blue-400 text-white":o.status==="Awaiting Payment","bg-green-100 text-green-600":o.status==="Delivered","bg-gray-300 text-gray-700":o.status==="Cancelled"}])},a(o.status),3),s("span",Ee,a(r.formatDate(o.createdAt)),1)]),s("div",Ke,[s("img",{src:(g=(m=o.orderItems[0])==null?void 0:m.productModel.images[0])==null?void 0:g.optimizeUrl,alt:"Product Image",class:"w-16 h-16 rounded-md object-cover"},null,8,ze),s("div",je,[s("p",We," Order ID: "+a(o.id.slice(0,8)),1),s("p",Re,[L(a(o.orderItems[0].productModel.name)+" ",1),o.orderItems.length>1?(l(),d("span",qe," & "+a(o.orderItems.length-1)+" more items ",1)):v("",!0)]),s("p",Ge," Ksh "+a(r.formattedPrice(o.total)),1)])])],8,Ve)}),128))])):(l(),d("div",He,[e[2]||(e[2]=s("img",{src:Te,alt:"Empty Cart",class:"w-40 h-40 mb-4"},null,-1)),e[3]||(e[3]=s("h2",{class:"text-xl font-semibold text-gray-700"},"No Orders!",-1)),e[4]||(e[4]=s("p",{class:"text-gray-500 text-sm mb-4"}," Browse our categories and discover our best deals! ",-1)),x(u,{to:"/dashboard"},{default:E(()=>e[1]||(e[1]=[s("button",{class:"bg-primary hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded"}," Start Shopping ",-1)])),_:1})]))])])):(l(),d("div",Ye,[i.fetching?(l(),d("div",$e,e[5]||(e[5]=[s("div",{class:"relative flex justify-center items-center h-96"},[s("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),s("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):(l(),d("div",Je,[s("a",{class:"p-button-text text-primary hover:text-white cursor-pointer",onClick:e[0]||(e[0]=o=>i.detailedView=!1),style:{color:"var(--secondary-color) !important","text-decoration":"underline"}}," Back to Orders "),s("div",Xe,[s("div",Qe,[e[7]||(e[7]=s("h2",{class:"text-2xl font-semibold"},"Order Details",-1)),s("div",Ze,[e[6]||(e[6]=s("p",{class:"font-semibold"},"Status",-1)),s("span",{class:_(["px-3 py-1 text-xs rounded-full",{"bg-yellow-400 text-yellow-800":i.orderDetails.status==="Pending","bg-yellow-400 text-blue-400":i.orderDetails.status==="Awaiting Payment","bg-green-100 text-green-600":i.orderDetails.status==="Delivered","bg-gray-300 text-gray-700":i.orderDetails.status==="Cancelled"}])},a(i.orderDetails.status),3)])]),x(f),s("div",et,[s("div",null,[e[8]||(e[8]=s("p",{class:"font-semibold"},"Order ID",-1)),s("p",null,a(i.orderDetails.id),1)]),s("div",null,[e[9]||(e[9]=s("p",{class:"font-semibold"},"Customer Name",-1)),s("p",null,a(i.orderDetails.first_name)+" "+a(i.orderDetails.last_name),1)]),s("div",null,[e[10]||(e[10]=s("p",{class:"font-semibold"},"Company Name",-1)),s("p",null,a(i.orderDetails.company_name||"N/A"),1)]),s("div",null,[e[11]||(e[11]=s("p",{class:"font-semibold"},"Address",-1)),s("p",null,a(i.orderDetails.street_address)+", "+a(i.orderDetails.town),1)]),s("div",null,[e[12]||(e[12]=s("p",{class:"font-semibold"},"Phone Number",-1)),s("p",null,a(i.orderDetails.phone_number),1)]),s("div",null,[e[13]||(e[13]=s("p",{class:"font-semibold"},"Email",-1)),s("p",null,a(i.orderDetails.email),1)]),s("div",null,[e[14]||(e[14]=s("p",{class:"font-semibold"},"Order Price",-1)),s("p",null,"Ksh "+a(r.formattedPrice(i.orderDetails.orderPrice)),1)]),s("div",null,[e[15]||(e[15]=s("p",{class:"font-semibold"},"VAT",-1)),s("p",null,"Ksh "+a(r.formattedPrice(i.orderDetails.vat)),1)]),s("div",null,[e[16]||(e[16]=s("p",{class:"font-semibold"},"Total",-1)),s("p",null,"Ksh "+a(r.formattedPrice(i.orderDetails.total)),1)]),s("div",null,[e[17]||(e[17]=s("p",{class:"font-semibold"},"Order Date",-1)),s("p",null,a(r.formatDate(i.orderDetails.createdAt)),1)])]),x(f,{class:"my-4"}),e[18]||(e[18]=s("h3",{class:"text-xl font-semibold mb-2"},"Order Items",-1)),s("div",tt,[(l(!0),d(k,null,P(i.orderDetails.orderItems,(o,b)=>{var m,g;return l(),d("div",{key:b,class:"border rounded-lg p-4"},[s("div",st,[s("img",{src:((g=(m=o.productModel.images)==null?void 0:m[0])==null?void 0:g.optimizeUrl)||"https://via.placeholder.com/100",alt:"Product Image",class:"w-16 h-16 rounded-md object-cover"},null,8,nt),s("div",null,[s("p",ot,a(o.productModel.name),1),s("p",it,a(o.productModel.description),1),s("p",rt," Price: Ksh "+a(r.formattedPrice(o.productModel.price)),1),s("p",at,"Quantity: "+a(o.quantity),1)])])])}),128))])])]))]))])}const vt=C(Oe,[["render",lt]]);export{vt as O,ht as P,J as s};
