import oe from"./DVs2OJRz.js";import re from"./eS8pf6c8.js";import le from"./Bfk8XPW3.js";import ie from"./B3fgAOjB.js";import{x as C,M as ae,C as ne,s as de,y as A,j as u,B as j,D as ce,J as ue,c as i,b as x,p as y,a as e,w as B,t as a,F as p,r as g,q as W,v as N,d as I,m as L,K as me,z as pe,o as l,l as ge,A as U}from"./CoyVHb3q.js";import{R as ve}from"./VVXzHwl5.js";import"./Be1fzYNM.js";import"./DGEOgZpe.js";import"./DwP0r8OC.js";import"./DBllE-4O.js";import"./DTr9jwMw.js";import"./B-x3AKLp.js";import"./BU7HOwbj.js";import"./Bo6vk6Ju.js";import"./BM2ClVBI.js";import"./CyGyADv7.js";import"./C4furr1e.js";import"./DmfvTtO6.js";import"./3A9dI5Hm.js";import"./D3b98cz8.js";import"./8x9NGM2Z.js";import"./CnELaeCv.js";import"./C1nQqg27.js";const fe={class:"container mx-auto p-6"},he=["href","onClick"],_e={class:"text-primary font-semibold"},xe=["href","target"],ye={class:"text-surface-700 dark:text-surface-0"},be={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-8"},we={class:"flex flex-col space-y-4"},ke={class:"text-xl font-bold"},Ce={class:"text-lg text-gray-700 font-medium"},Ie={class:"flex items-center space-x-4"},Le={class:"flex items-center space-x-4"},Te={class:"text-gray-600"},$e=["loading"],Pe={key:0,class:"pi pi-heart cursor-pointer mr-2",style:{"font-size":"1.8rem"}},Se={key:1,class:"pi pi-heart-fill cursor-pointer mr-2",style:{"font-size":"1.8rem",color:"red"}},De={class:"mt-4 space-y-2"},Me={class:"flex space-x-1 align-center"},Re=["innerHTML"],Ae={class:"flexflex-col md:flex-row items-center"},je={class:"w-full h-96 mb-4 md:mb-0 md:mr-4 border rounded-lg overflow-hidden"},Be=["src"],We={class:"flex mt-8 md:flex-row gap-2 justify-center md:overflow-visible"},Ne=["src","onClick"],Ue={key:1,class:"mt-8"},ze={class:"flex space-x-8 border-b pb-2"},Ve={key:0,class:"mt-6 space-y-6"},He=["innerHTML"],Je={key:1,class:"mt-6 space-y-8"},Oe={key:0},Ee={class:"flex items-center space-x-4"},Ke={class:"flex justify-between items-center mt-1"},qe={class:"flex space-x-1"},Fe=["fill"],Ye={class:"text-sm text-gray-500 ml-4"},Ge={class:"mt-4 text-gray-800"},Qe={class:"font-bold text-gray-800"},Xe={key:1,class:"text-center text-gray-500 py-6"},Ze={key:2,class:"mt-6 space-y-6"},es={class:"flex items-start space-x-4"},ss={class:"flex-1"},ts={class:"flex items-center space-x-4"},os=["src"],rs={class:"font-bold text-gray-800"},ls={class:"text-sm text-gray-500"},is={class:"mt-2 text-gray-700"},as={class:"flex items-center space-x-4 text-gray-500 text-sm mt-2"},ns=["onClick"],ds={key:0,class:"mt-4 pl-6 border-l"},cs={class:"flex items-center space-x-4"},us=["src"],ms={class:"font-bold text-gray-800"},ps={class:"text-sm text-gray-500"},gs={class:"mt-2 text-gray-700"},vs={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},fs={class:"rounded-md pt-10"},hs={class:"flex overflow-x-auto gap-4 p-2"},_s=["onClick"],xs={class:"relative"},ys=["src","alt"],bs={class:"text-sm font-medium mt-2 truncate"},ws={class:"text-gray-500 text-xs line-through"},qs={__name:"[id]",setup(ks){const{$formatPrice:z}=C(),V=ae(),T=o=>z(o),{$formatDate:H}=C(),J=o=>H(o),v=ne(),$=de(),k=A(),O=ue(),b=u(1),m=u("details");u([]);const P=j(()=>k.wishListItems),E=j(()=>k.products),K=o=>!o||!o.id?!1:$.isLoggedIn?P.value.some(r=>r.productModel.id===o.id):P.value.some(r=>r.id===o.id),q=o=>{const{firstName:t,lastName:r}=o;return`${(t==null?void 0:t.charAt(0))||""}${(r==null?void 0:r.charAt(0))||""}`.toUpperCase()},n=u(null);u(!1);const w=u(!1),{$axios:F}=C(),Y=o=>{V.push({path:`/products/${o.id}`})};ce(()=>{Z()});const G=o=>{n.value.image=o},S=o=>o?o.replace(/\r\n/g,"<br>"):"",Q=async o=>{const t=A();try{if($.isLoggedIn){const r=await t.addToWishlist(o.id);await t.getWishList(),v.add({severity:"success",summary:r.data.message,group:"br",life:3e3})}else{const r=JSON.parse(localStorage.getItem("wishlist"))||[],f=r.findIndex(c=>c.id===o.id);if(f===-1){const c={id:o.id,name:o.name,created_at:new Date().toISOString(),userId:"user.id",productModelId:o.id,productModel:{...o}};r.push(c),localStorage.setItem("wishlist",JSON.stringify(r)),await t.getWishList(),v.add({severity:"success",summary:"Your Wishlist has been saved locally.",group:"br",life:3e3})}else r.splice(f,1),localStorage.setItem("wishlist",JSON.stringify(r)),await t.getWishList(),v.add({severity:"info",summary:"The item has been removed from your local wishlist.",group:"br",life:3e3})}}catch(r){console.error("Error processing wishlist:",r),v.add({severity:"error",summary:"An error occurred while managing your wishlist.",detail:r.message,group:"br",life:5e3})}},X=async o=>{w.value=!0;try{await k.addToCart(o,b.value),v.add({severity:"success",summary:"Product Added to Cart",group:"br",life:3e3}),w.value=!1}catch{w.value=!1,v.add({severity:"danger",summary:"error adding to cart, Please try again",group:"br",life:3e3})}},Z=async()=>{var t;const o=O.params.id;try{const r=await F.get(`product/model/by-id/${o}`),f=(t=r.data.images.find(h=>h.isPrimary))==null?void 0:t.uploadUrl,c=r.data.images.map(h=>h.uploadUrl);console.log("fd",c),n.value={...r.data,image:f,images:c,description:r.data.description,colors:r.data.colors},console.log("Updated Product:",n.value)}catch(r){console.error("Error fetching product by ID:",r)}},ee=u({icon:"pi pi-home",route:"/dashboard"}),se=u([{label:"Products",route:"/dashboard"}]),D=o=>({"text-black border-b-2 border-black":m.value===o,"text-gray-600":m.value!==o});return(o,t)=>{var M;const r=pe("router-link"),f=ie,c=le,h=re,te=oe;return l(),i("div",fe,[x(f,{home:ee.value,model:se.value},{item:B(({item:s,props:d})=>[s.route?(l(),ge(r,{key:0,to:s.route,custom:""},{default:B(({href:_,navigate:R})=>[e("a",U({href:_},d.action,{onClick:R}),[e("span",{class:L([s.icon,"text-color"])},null,2),e("span",_e,a(s.label),1)],16,he)]),_:2},1032,["to"])):(l(),i("a",U({key:1,href:s.url,target:s.target},d.action),[e("span",ye,a(s.label),1)],16,xe))]),_:1},8,["home","model"]),n.value?(l(),i("div",be,[e("div",we,[e("h2",ke,a(n.value.name),1),e("p",Ce," Ksh "+a(T(n.value.price)),1),t[10]||(t[10]=e("p",{class:"text-gray-600 leading-relaxed"},null,-1)),e("div",Ie,[(l(!0),i(p,null,g(n.value.features,s=>(l(),i("p",null,a(s.description),1))),256))]),e("div",Le,[W(e("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),class:"w-16 border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-gray-500"},null,512),[[N,b.value]]),e("p",Te,[t[7]||(t[7]=e("i",{class:"pi pi-wallet mr-4"},null,-1)),I(" Ksh "+a(T(n.value.price*b.value)),1)]),e("p",null,[e("button",{onClick:t[1]||(t[1]=s=>Q(n.value)),loading:o.loadingWish},[K(n.value)?(l(),i("i",Se)):(l(),i("i",Pe))],8,$e)]),x(c,{onClick:t[2]||(t[2]=s=>X(n.value)),loading:w.value,label:"Add to Cart"},null,8,["loading"])]),e("div",De,[e("div",Me,[x(ve,{reviews:n.value.Review},null,8,["reviews"])]),t[8]||(t[8]=e("p",{class:"text-bl font-bold"},[e("i",{class:"fas fa-truck"}),I(" Description ")],-1)),e("p",{class:"text-gray-600",innerHTML:S(n.value.description)},null,8,Re),t[9]||(t[9]=e("p",{class:"text-gray-600"},[e("i",{class:"fas fa-undo"})],-1))])]),e("div",Ae,[e("div",je,[e("img",{src:n.value.image,alt:"Product Image",class:"w-full h-full object-contain"},null,8,Be)]),e("div",We,[(l(!0),i(p,null,g(n.value.images.slice(-4),(s,d)=>(l(),i("img",{key:d,src:s,alt:"Thumbnail",onClick:_=>G(s),class:"w-20 h-20 md:w-32 md:h-32 object-cover border rounded-lg cursor-pointer hover:border-gray-500"},null,8,Ne))),128))])])])):y("",!0),n.value?(l(),i("div",Ue,[e("div",ze,[e("h3",{class:L(["cursor-pointer text-lg font-semibold",D("details")]),onClick:t[3]||(t[3]=s=>m.value="details")}," Details ",2),e("h3",{class:L(["cursor-pointer text-lg font-semibold",D("reviews")]),onClick:t[4]||(t[4]=s=>m.value="reviews")}," Reviews ",2)]),m.value==="details"?(l(),i("div",Ve,[e("p",{innerHTML:S(n.value.description)},null,8,He)])):y("",!0),m.value==="reviews"?(l(),i("div",Je,[(M=n.value.Review)!=null&&M.length?(l(),i("div",Oe,[(l(!0),i(p,null,g(n.value.Review,s=>(l(),i("div",{key:s.id,class:"border-b pb-4"},[e("div",Ee,[x(h,{label:q(s.user),class:"bg-blue-100 text-blue-700 font-bold",shape:"circle",size:"xlarge"},null,8,["label"]),e("div",null,[e("div",Ke,[e("div",qe,[(l(),i(p,null,g(5,d=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:d<=s.rating?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-4 h-4 text-yellow-400"},t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},null,-1)]),8,Fe)),64))]),e("p",Ye,a(J(s.createdAt)),1)]),e("p",Ge,a(s.comment),1),e("h4",Qe," by "+a(s.user.firstName+" "+s.user.lastName),1)])])]))),128))])):(l(),i("div",Xe," No reviews yet. Be the first to review this product! "))])):y("",!0),m.value==="discussion"?(l(),i("div",Ze,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Discussion",-1)),e("div",es,[e("div",ss,[W(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.newComment=s),placeholder:"Write your comment...",rows:"3",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[N,o.newComment]]),e("button",{onClick:t[6]||(t[6]=(...s)=>o.addComment&&o.addComment(...s)),class:"mt-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," Post Review ")])]),(l(!0),i(p,null,g(o.discussionComments,s=>(l(),i("div",{key:s.id,class:"border-b pb-4"},[e("div",ts,[e("img",{src:s.avatar,alt:"User Avatar",class:"w-10 h-10 rounded-full"},null,8,os),e("div",null,[e("h4",rs,a(s.name),1),e("p",ls,a(s.date),1)])]),e("p",is,a(s.content),1),e("div",as,[e("span",{onClick:d=>o.replyToComment(s.id),class:"cursor-pointer hover:text-gray-700"},"Reply",8,ns),e("span",null,"Likes: "+a(s.likes),1),e("span",null,"Replies: "+a(s.replies),1)]),s.replies&&s.replies.length?(l(),i("div",ds,[(l(!0),i(p,null,g(s.replies,d=>(l(),i("div",{key:d.id,class:"mt-2"},[e("div",cs,[e("img",{src:d.avatar,alt:"Reply Avatar",class:"w-8 h-8 rounded-full"},null,8,us),e("div",null,[e("h4",ms,a(d.name),1),e("p",ps,a(d.date),1)])]),e("p",gs,a(d.content),1)]))),128))])):y("",!0)]))),128))])):y("",!0)])):(l(),i("div",vs,t[13]||(t[13]=[e("div",{class:"relative flex justify-center items-center"},[e("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),e("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))),e("section",null,[e("div",fs,[t[15]||(t[15]=e("div",{class:"flex justify-between items-center mb-4"},[e("h2",{class:"text-xl font-semibold"},"Related Products")],-1)),e("div",hs,[(l(!0),i(p,null,g(me(E),(s,d)=>{var _;return l(),i("div",{key:d,class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:R=>Y(s)},[e("div",xs,[e("img",{src:(_=s.images[0])==null?void 0:_.uploadUrl,alt:s.name,class:"w-full h-36 object-cover rounded-md"},null,8,ys)]),I(" "+a(s.product.name)+" ",1),e("h3",bs,a(s.name),1),t[14]||(t[14]=e("p",{class:"text-lg font-semibold text-gray-900"},null,-1)),e("p",ws,a(s.oldPrice),1)],8,_s)}),128))])])]),x(te,{position:"bottom-right",group:"br"})])}}};export{qs as default};
