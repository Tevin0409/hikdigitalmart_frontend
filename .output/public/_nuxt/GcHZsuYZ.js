import{s as ss}from"./BYFMYSQl.js";import{s as es}from"./BcZGkn25.js";import{s as ts}from"./B-UFHLkv.js";import{_ as os,y as W,a3 as ls,W as rs,x as as,J as D,a4 as is,r as u,S as N,U as ns,q as ds,c as a,b as L,w as U,a as s,t as i,F as m,m as p,N as j,X as B,d as I,I as x,u as b,a5 as cs,o as r,G as us,v as R}from"./DFYqaOGF.js";import"./BBFYb20r.js";import"./oQGiuSsV.js";import"./BX-iDZwl.js";import"./CibPE6Ef.js";const ms={class:"container mx-auto p-6"},ps=["href","onClick"],gs={class:"text-primary font-semibold"},vs=["href","target"],fs={class:"text-surface-700 dark:text-surface-0"},hs={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-8"},_s={class:"flex flex-col space-y-4"},xs={class:"text-3xl font-bold"},ys={class:"text-lg text-gray-700 font-medium"},bs={class:"flex items-center space-x-4"},ws={class:"flex items-center space-x-4"},ks={class:"text-gray-600"},Cs=["loading"],Ls={key:0,class:"pi pi-heart cursor-pointer mr-2",style:{"font-size":"2.3rem"}},Is={key:1,class:"pi pi-heart-fill cursor-pointer mr-2",style:{"font-size":"2.3rem",color:"red"}},Ps={class:"mt-4 space-y-2"},Ts=["innerHTML"],Ss={class:"flexflex-col md:flex-row items-center"},$s={class:"w-full h-96 mb-4 md:mb-0 md:mr-4 border rounded-lg overflow-hidden"},Ms=["src"],Ws={class:"flex mt-8 md:flex-row gap-2 justify-center md:overflow-visible"},Ds=["src","onClick"],Ns={key:1,class:"mt-8"},Us={class:"flex space-x-8 border-b pb-2"},js={key:0,class:"mt-6 space-y-6"},Bs=["innerHTML"],Rs={key:1,class:"mt-6 space-y-8"},As={class:"flex items-center space-x-4"},zs=["src"],Vs={class:"font-bold text-gray-800"},Hs={class:"text-sm text-gray-500"},Es={class:"flex space-x-1 mt-1"},Js=["fill"],Os={class:"mt-4 text-gray-800"},Ys={class:"flex items-center space-x-4 text-gray-500 text-sm mt-2"},qs={key:2,class:"mt-6 space-y-6"},Fs={class:"flex items-start space-x-4"},Ks={class:"flex-1"},Gs={class:"flex items-center space-x-4"},Xs=["src"],Qs={class:"font-bold text-gray-800"},Zs={class:"text-sm text-gray-500"},se={class:"mt-2 text-gray-700"},ee={class:"flex items-center space-x-4 text-gray-500 text-sm mt-2"},te=["onClick"],oe={key:0,class:"mt-4 pl-6 border-l"},le={class:"flex items-center space-x-4"},re=["src"],ae={class:"font-bold text-gray-800"},ie={class:"text-sm text-gray-500"},ne={class:"mt-2 text-gray-700"},de={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ce={class:"rounded-md pt-10"},ue={class:"flex overflow-x-auto gap-4 p-2"},me=["onClick"],pe={class:"relative"},ge=["src","alt"],ve={class:"text-sm font-medium mt-2 truncate"},fe={class:"text-gray-500 text-xs line-through"},he={__name:"[id]",setup(_e){const{$formatPrice:A}=W(),z=ls(),P=o=>A(o),g=rs(),T=as(),w=D(),V=is(),y=u(1),c=u("details");u([]);const S=N(()=>w.wishListItems),H=N(()=>w.products),E=o=>!o||!o.id?!1:T.isLoggedIn?S.value.some(l=>l.productModel.id===o.id):S.value.some(l=>l.id===o.id),J=[{id:1,name:"Helen Mwoki.",date:"Yesterday",rating:5,comment:"Excellent gamepad!",likes:42,replies:0,avatar:"https://via.placeholder.com/40"},{id:1,name:"Susan Njeri M.",date:"Yesterday",rating:5,comment:"Besst Product ever !",likes:42,replies:0,avatar:"https://via.placeholder.com/40"}],n=u(null),k=u(!1),O=u(!1),{$axios:Y}=W(),q=o=>{z.push({path:`/products/${o.id}`})};ns(()=>{X()});const F=o=>{n.value.image=o},$=o=>o?o.replace(/\r\n/g,"<br>"):"",K=async o=>{const t=D();try{if(T.isLoggedIn){const l=await t.addToWishlist(o.id);await t.getWishList(),g.add({severity:"success",summary:l.data.message,group:"br",life:3e3})}else{const l=JSON.parse(localStorage.getItem("wishlist"))||[],v=l.findIndex(f=>f.id===o.id);v===-1?(l.push(o),localStorage.setItem("wishlist",JSON.stringify(l)),await t.getWishList(),g.add({severity:"success",summary:"Your Wishlist has been saved locally.",group:"br",life:3e3})):(l.splice(v,1),localStorage.setItem("wishlist",JSON.stringify(l)),await t.getWishList(),g.add({severity:"info",summary:"The item has been removed from your local wishlist.",group:"br",life:3e3}))}}catch(l){console.error("Error processing wishlist:",l),g.add({severity:"error",summary:"An error occurred while managing your wishlist.",detail:l.message,group:"br",life:5e3})}},G=async o=>{k.value=!0;try{await w.addToCart(o,y.value),g.add({severity:"success",summary:"Product Added to Cart",group:"br",life:3e3}),k.value=!1}catch{k.value=!1,g.add({severity:"danger",summary:"error adding to cart, Please try again",group:"br",life:3e3})}},X=async()=>{var t;const o=V.params.id;try{const l=await Y.get(`product/model/by-id/${o}`),v=(t=l.data.images.find(h=>h.isPrimary))==null?void 0:t.uploadUrl,f=l.data.images.map(h=>h.uploadUrl);console.log("fd",f),n.value={...l.data,image:v,images:f,description:l.data.description,colors:l.data.colors},console.log("Updated Product:",n.value)}catch(l){console.error("Error fetching product by ID:",l)}},Q=u({icon:"pi pi-home",route:"/dashboard"}),Z=u([{label:"Products",route:"/dashboard"}]),C=o=>({"text-black border-b-2 border-black":c.value===o,"text-gray-600":c.value!==o});return(o,t)=>{const l=ds("router-link"),v=ts,f=es,h=ss;return r(),a("div",ms,[L(v,{home:Q.value,model:Z.value},{item:U(({item:e,props:d})=>[e.route?(r(),us(l,{key:0,to:e.route,custom:""},{default:U(({href:_,navigate:M})=>[s("a",R({href:_},d.action,{onClick:M}),[s("span",{class:b([e.icon,"text-color"])},null,2),s("span",gs,i(e.label),1)],16,ps)]),_:2},1032,["to"])):(r(),a("a",R({key:1,href:e.url,target:e.target},d.action),[s("span",fs,i(e.label),1)],16,vs))]),_:1},8,["home","model"]),n.value?(r(),a("div",hs,[s("div",_s,[s("h2",xs,i(n.value.name),1),s("p",ys," Ksh "+i(P(n.value.price)),1),t[11]||(t[11]=s("p",{class:"text-gray-600 leading-relaxed"},null,-1)),s("div",bs,[(r(!0),a(m,null,p(n.value.features,e=>(r(),a("p",null,i(e.description),1))),256))]),s("div",ws,[j(s("input",{type:"number",min:"1","onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),class:"w-16 border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-gray-500"},null,512),[[B,y.value]]),s("p",ks,[t[8]||(t[8]=s("i",{class:"pi pi-wallet mr-4"},null,-1)),I(" Ksh "+i(P(n.value.price*y.value)),1)]),s("p",null,[s("button",{onClick:t[1]||(t[1]=e=>K(n.value)),loading:o.loadingWish},[E(n.value)?(r(),a("i",Is)):(r(),a("i",Ls))],8,Cs)]),L(f,{onClick:t[2]||(t[2]=e=>G(n.value)),loading:O.value,label:"Add to Cart"},null,8,["loading"])]),s("div",Ps,[t[9]||(t[9]=s("p",{class:"text-bl font-bold"},[s("i",{class:"fas fa-truck"}),I(" Description ")],-1)),s("p",{class:"text-gray-600",innerHTML:$(n.value.description)},null,8,Ts),t[10]||(t[10]=s("p",{class:"text-gray-600"},[s("i",{class:"fas fa-undo"})],-1))])]),s("div",Ss,[s("div",$s,[s("img",{src:n.value.image,alt:"Product Image",class:"w-full h-full object-contain"},null,8,Ms)]),s("div",Ws,[(r(!0),a(m,null,p(n.value.images.slice(-4),(e,d)=>(r(),a("img",{key:d,src:e,alt:"Thumbnail",onClick:_=>F(e),class:"w-20 h-20 md:w-32 md:h-32 object-cover border rounded-lg cursor-pointer hover:border-gray-500"},null,8,Ds))),128))])])])):x("",!0),n.value?(r(),a("div",Ns,[s("div",Us,[s("h3",{class:b(["cursor-pointer text-lg font-semibold",C("details")]),onClick:t[3]||(t[3]=e=>c.value="details")}," Details ",2),s("h3",{class:b(["cursor-pointer text-lg font-semibold",C("reviews")]),onClick:t[4]||(t[4]=e=>c.value="reviews")}," Reviews ",2),s("h3",{class:b(["cursor-pointer text-lg font-semibold",C("discussion")]),onClick:t[5]||(t[5]=e=>c.value="discussion")}," Discussion ",2)]),c.value==="details"?(r(),a("div",js,[s("p",{innerHTML:$(n.value.description)},null,8,Bs)])):x("",!0),c.value==="reviews"?(r(),a("div",Rs,[(r(),a(m,null,p(J,e=>s("div",{key:e.id,class:"border-b pb-4"},[s("div",As,[s("img",{src:e.avatar,alt:"User Avatar",class:"w-10 h-10 rounded-full"},null,8,zs),s("div",null,[s("h4",Vs,i(e.name),1),s("p",Hs,i(e.date),1),s("div",Es,[(r(),a(m,null,p(5,d=>s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:d<=e.rating?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-4 h-4 text-yellow-400"},t[12]||(t[12]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},null,-1)]),8,Js)),64))])])]),s("p",Os,i(e.comment),1),s("div",Ys,[t[13]||(t[13]=s("span",{class:"cursor-pointer hover:text-gray-700"},"Reply",-1)),s("span",null,"Likes: "+i(e.likes),1),s("span",null,"Replies: "+i(e.replies),1)])])),64))])):x("",!0),c.value==="discussion"?(r(),a("div",qs,[t[14]||(t[14]=s("h2",{class:"text-2xl font-bold text-gray-800"},"Discussion",-1)),s("div",Fs,[s("div",Ks,[j(s("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newComment=e),placeholder:"Write your comment...",rows:"3",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[B,o.newComment]]),s("button",{onClick:t[7]||(t[7]=(...e)=>o.addComment&&o.addComment(...e)),class:"mt-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," Post Comment ")])]),(r(!0),a(m,null,p(o.discussionComments,e=>(r(),a("div",{key:e.id,class:"border-b pb-4"},[s("div",Gs,[s("img",{src:e.avatar,alt:"User Avatar",class:"w-10 h-10 rounded-full"},null,8,Xs),s("div",null,[s("h4",Qs,i(e.name),1),s("p",Zs,i(e.date),1)])]),s("p",se,i(e.content),1),s("div",ee,[s("span",{onClick:d=>o.replyToComment(e.id),class:"cursor-pointer hover:text-gray-700"},"Reply",8,te),s("span",null,"Likes: "+i(e.likes),1),s("span",null,"Replies: "+i(e.replies),1)]),e.replies&&e.replies.length?(r(),a("div",oe,[(r(!0),a(m,null,p(e.replies,d=>(r(),a("div",{key:d.id,class:"mt-2"},[s("div",le,[s("img",{src:d.avatar,alt:"Reply Avatar",class:"w-8 h-8 rounded-full"},null,8,re),s("div",null,[s("h4",ae,i(d.name),1),s("p",ie,i(d.date),1)])]),s("p",ne,i(d.content),1)]))),128))])):x("",!0)]))),128))])):x("",!0)])):(r(),a("div",de,t[15]||(t[15]=[s("div",{class:"relative flex justify-center items-center"},[s("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),s("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))),s("section",null,[s("div",ce,[t[17]||(t[17]=s("div",{class:"flex justify-between items-center mb-4"},[s("h2",{class:"text-xl font-semibold"},"Related Products")],-1)),s("div",ue,[(r(!0),a(m,null,p(cs(H),(e,d)=>{var _;return r(),a("div",{key:d,class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:M=>q(e)},[s("div",pe,[s("img",{src:(_=e.images[0])==null?void 0:_.uploadUrl,alt:e.name,class:"w-full h-36 object-cover rounded-md"},null,8,ge)]),I(" "+i(e.product.name)+" ",1),s("h3",ve,i(e.name),1),t[16]||(t[16]=s("p",{class:"text-lg font-semibold text-gray-900"},null,-1)),s("p",fe,i(e.oldPrice),1)],8,me)}),128))])])]),L(h,{position:"bottom-right",group:"br"})])}}},Pe=os(he,[["__scopeId","data-v-225a4a3c"]]);export{Pe as default};
