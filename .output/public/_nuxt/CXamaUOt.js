import{_ as z}from"./CwOlhz6d.js";import{s as G}from"./DJzw4iuH.js";import{F as H,_ as Y,a as J,T as Q,b as X,c as Z,d as ee}from"./3dqSyJAp.js";import{_ as te,f as se,S as oe,ay as re,r as o,R as ae,y as v,q as N,c as d,a as r,d as ne,t as ce,b as T,F as ie,m as le,I as de,o as c,G as ue}from"./BUDlA4ll.js";import"./CoXfKqwZ.js";import"./7raQZ81m.js";import"./BGEMfD1f.js";import"./BL3G2prY.js";import"./DtsxtzxN.js";import"./DjC0JdPm.js";import"./3MgOLFBG.js";import"./Cxz1vrXd.js";import"./4Q_ng1LK.js";import"./c0Tdd82Y.js";import"./D5Ul-VN7.js";import"./Dtb3Dwp9.js";const pe={name:"Dashboard",components:{FlashCard:H,CategoryCard:Y,ProductCard:J,TopCard:Q,Footer:X,FilterCard:Z},props:{searchTerm:{type:String,default:""}},setup(b){se(()=>b.searchTerm,(e,s)=>{S.value=!0,m()}),oe(async()=>{m(),k(),await q()});const t=re(),y=o(1);o(1);const a=ae(()=>[...h.value].sort(()=>Math.random()-.5).slice(0,6)),S=o(!1),w=o(null),f=o([]),x=o([20,80]),i=o(!1),u=o(!1),p=t.params.id,D=t.query.searchTerm,I=o({days:"00",hours:"00",minutes:"00",seconds:"00"}),R=e=>{t.push({path:`/products/${e.id}`})},M=o(new Date(new Date().getTime()+3*24*60*60*1e3)),k=()=>{const e=new Date().getTime(),s=M.value-e;s>0?I.value={days:Math.floor(s/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(s%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(s%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(s%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),I.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},E={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},A=e=>E[e]||"pi pi-question",g=o([]),O=o([]);v();const h=o([]),l=o(0),F=()=>{l.value=(l.value+1)%g.value.length},V=()=>{y.value++,m()},U=()=>{l.value=(l.value-1+g.value.length)%g.value.length},L=e=>{console.log("ca",e)},B=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(e):"0",K=e=>{w.value=[e.id],m()},j=e=>{l.value=e},m=async()=>{i.value=!0,u.value=!0;try{const{$axios:e}=v(),s=t.params.id,_=t.query.searchTerm||"",n={};_&&(n.searchTerm=_.slice(0,5)),s&&(n.categoryId=[s]);const C=await e.get("/product/product-models",{params:{...n,page:y.value,limit:10}});i.value=!1,h.value=C.data.results,await P(),console.log(h.value,"products")}catch(e){console.error("Error fetching products:",e)}finally{i.value=!1,u.value=!1}},P=async()=>{try{const{$axios:e}=v(),s=t.params.id,_=t.query.productId,n={};s&&(n.categoryId=s,n.productId=_);const C=await e.get("/product/features",{params:{...n}});f.value=C.data.map($=>({...$,selected:!1}))}catch(e){console.error("Error fetching products:",e)}finally{}},q=async()=>{const{$axios:e}=v();try{const s=await e.get("/product/categories",{});O.value=s.data}catch(s){console.error("Error fetching products:",s)}},W=o([{breakpoint:"1400px",numVisible:2,numScroll:1},{breakpoint:"1199px",numVisible:3,numScroll:1},{breakpoint:"767px",numVisible:2,numScroll:1},{breakpoint:"575px",numVisible:1,numScroll:1}]);return{images:g,currentIndex:l,nextSlide:F,prevSlide:U,goToSlide:j,categories:O,products:h,responsiveOptions:W,getItems:L,getSeverity:e=>{switch(e){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:x,filter:S,showMoreProducts:V,fetching:i,fetchingMore:u,formatPrice:B,randomizedProducts:a,goToProductPage:R,getIcon:A,getCategoryProducts:K,getProduct:m,getFeatures:P,features:f,category:p,searchTer:D}}},me={class:"container mx-auto my-10 pa-10"},fe={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},ge={class:"flex justify-between items-center mb-4"},he={class:"text-xl font-regular"},_e={class:"font-bold"},ve={class:"flex"},ye={class:"w-full"},Se={key:0,class:"text-center mt-6"},xe={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Ce={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Te={key:3,class:"flex justify-center py-8"};function be(b,t,y,a,S,w){const f=N("FilterCard"),x=N("ProductCard"),i=G,u=z;return c(),d("div",me,[r("section",fe,[r("div",ge,[r("h2",he,[t[1]||(t[1]=ne(" Search results for ")),r("span",_e,ce(a.searchTer),1)]),t[2]||(t[2]=r("div",{class:"flex space-x-2"},null,-1))]),r("div",ve,[T(f,{features:a.features},null,8,["features"]),r("div",ye,[a.fetching&&a.products.length<1?(c(),d("div",Se,t[3]||(t[3]=[r("div",{class:"relative flex justify-center items-center"},[r("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),r("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):a.products.length==0?(c(),d("div",xe,t[4]||(t[4]=[r("img",{src:ee,alt:"No items found",class:"h-56 w-56"},null,-1),r("p",{class:"pt-6"},"No items found",-1)]))):(c(),d("div",Ce,[(c(!0),d(ie,null,le(a.products,p=>(c(),ue(x,{key:p.id,item:p},null,8,["item"]))),128))])),a.products.length!=0?(c(),d("div",Te,[T(i,{type:"button",label:"Show More",icon:"pi pi-sync",loading:a.fetchingMore,onClick:t[0]||(t[0]=p=>a.showMoreProducts())},null,8,["loading"])])):de("",!0)])])]),T(u)])}const je=te(pe,[["render",be],["__scopeId","data-v-aa74852f"]]);export{je as default};
