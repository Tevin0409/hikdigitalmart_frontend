import{_ as M}from"./BoGsKL90.js";import{s as I}from"./C2PQ8H2o.js";import{_ as F,J as W,x as j,W as A,S as p,U as N,c as i,a as t,b as f,w as v,t as a,F as w,m as P,y as U,o as d,I as L,d as x}from"./Bl1bbvOW.js";import"./DNTWPU1U.js";import"./Bu_oc2e3.js";import"./BFCANQ_L.js";const V=""+new URL("wish-list.DInbe6H6.png",import.meta.url).href,z={setup(){const l=W(),o=j(),_=A(),r=p(()=>l.wishListItems),C=p(()=>l.cartItems),k=p(()=>l.cartCount),h=p(()=>l.cartTotal),b=p(()=>l.products);return p(()=>o.isLoggedIn),N(()=>{l.getWishList()}),{wishList:r,cartItems:C,cartCount:k,cartTotal:h,formattedPrice:e=>{const{$formatPrice:m}=U();return m(e)},removeFromWishlist:async e=>{await l.removeFromWishlist(e.id)},addToCart:async e=>{var m;((m=e.productModel)==null?void 0:m.id)??e.id;try{if(o.isLoggedIn){const g=await l.addToCart(e.productModel,1);console.log(e),await l.removeFromWishlist(e.id)}else{const g=await l.addToCart(e,1);await l.removeFromWishlist(e.id)}_.add({severity:"success",summary:"Product moved to Cart",group:"br",life:3e3})}catch(g){_.add({severity:"error",summary:"Failed to Add Product",detail:g.message,group:"br",life:5e3})}},products:b,randomizedProducts:e=>!Array.isArray(e)||e.length===0?(console.warn("Invalid or empty products array:",e),[]):[...e].sort(()=>.5-Math.random()).slice(0,5)}}},B={class:"p-6 container mx-auto"},K={key:0,class:"flex flex-col items-center justify-center bg-white shadow-lg rounded-lg p-6 mb-6"},E={key:1,class:"p-6 container mx-auto"},D={class:"text-2xl font-bold mb-4"},R={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6 mb-6"},H={class:"relative"},J=["src","alt"],Y={key:0,class:"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded"},q=["onClick"],G={class:"p-4"},O={class:"text-md font-semibold truncate"},Q={class:"text-sm font-light"},X={class:"text-gray-500 mb-2"},Z={class:"text-red-500 font-bold"},$={key:0,class:"line-through text-sm ml-2 text-gray-400"},tt=["onClick"],st={class:"bg-white border rounded-lg p-4"},ot={class:"flex justify-between items-center mb-4"},et={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},rt=["src","alt"],lt={class:"text-sm font-medium"},it={class:"text-primary font-semibold text-lg"},dt={class:"bg-white border rounded-lg p-4 mt-4"},at={class:"flex justify-between items-center mb-4"},nt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},ct=["src","alt"],mt={class:"text-sm font-medium"},ut={class:"text-primary font-semibold text-lg"};function gt(l,o,_,r,C,k){const h=M,b=I;return d(),i("div",B,[r.wishList.length<1?(d(),i("div",K,[o[1]||(o[1]=t("img",{src:V,alt:"Empty Cart",class:"w-20 h-20 mb-4"},null,-1)),o[2]||(o[2]=t("h2",{class:"text-xl font-semibold text-gray-700"}," Your wishlist is empty! ",-1)),o[3]||(o[3]=t("p",{class:"text-gray-500 text-sm mb-4"}," Browse our categories and discover our best deals! ",-1)),f(h,{to:"/dashboard"},{default:v(()=>o[0]||(o[0]=[t("button",{class:"bg-primary hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded"}," Start Shopping ",-1)])),_:1})])):(d(),i("div",E,[t("h2",D,"Wishlist ("+a(r.wishList.length)+")",1),t("div",R,[(d(!0),i(w,null,P(r.wishList,(s,u)=>{var n,c,e,m,g,S,T;return d(),i("div",{key:u,class:"bg-white border rounded-lg shadow-sm overflow-hidden"},[t("div",H,[t("img",{src:(e=(c=(n=s.productModel)==null?void 0:n.images)==null?void 0:c.find(y=>y.isPrimary))==null?void 0:e.uploadUrl,alt:((m=s.productModel)==null?void 0:m.name)||"Product Image",class:"w-full h-40 object-cover"},null,8,J),s.discount?(d(),i("span",Y," -"+a(s.discount)+"% ",1)):L("",!0),t("button",{class:"absolute top-2 right-2 rounded-full p-1 hover:text-red-500",onClick:y=>r.removeFromWishlist(s)},o[4]||(o[4]=[t("i",{class:"pi pi-trash text-red-700",style:{"font-size":"1.4rem"}},null,-1)]),8,q)]),t("div",G,[t("h3",O,[x(a((g=s.productModel)==null?void 0:g.name)+" ",1),o[5]||(o[5]=t("br",null,null,-1)),t("span",Q,a((S=s.productModel)==null?void 0:S.name),1)]),t("p",X,[t("span",Z,[o[6]||(o[6]=t("i",{class:"pi pi-wallet"},null,-1)),x(" Ksh "+a(r.formattedPrice((T=s.productModel)==null?void 0:T.price)),1)]),s!=null&&s.originalPrice?(d(),i("span",$," Ksh"+a(s==null?void 0:s.originalPrice),1)):L("",!0)]),t("button",{class:"w-full bg-black text-white py-2 rounded hover:bg-gray-800",onClick:y=>r.addToCart(s)}," Move To Cart ",8,tt)])])}),128))]),o[7]||(o[7]=t("div",null,null,-1))])),t("div",st,[t("div",ot,[o[9]||(o[9]=t("h3",{class:"text-lg font-semibold text-gray-700"},"Recently Viewed",-1)),f(h,{to:"/cart"},{default:v(()=>o[8]||(o[8]=[t("a",{href:"#",class:"text-primary hover:text-orange-600 text-sm font-semibold flex items-center"},[x(" See All "),t("i",{class:"ml-1 pi pi-angle-right"})],-1)])),_:1})]),t("div",et,[(d(!0),i(w,null,P(r.randomizedProducts(r.products),(s,u)=>{var n,c;return d(),i("div",{key:u,class:"border rounded-lg p-3"},[t("img",{src:(c=(n=s==null?void 0:s.images)==null?void 0:n.find(e=>e.isPrimary))==null?void 0:c.uploadUrl,alt:s.name,class:"w-full h-40 object-cover"},null,8,rt),t("p",lt,a(s.name),1),t("p",it," Ksh "+a(r.formattedPrice(s.price)),1)])}),128))])]),t("div",dt,[t("div",at,[o[11]||(o[11]=t("h3",{class:"text-lg font-semibold text-gray-700"},"Top Selling Items",-1)),f(h,{to:"/cart"},{default:v(()=>o[10]||(o[10]=[t("a",{href:"#",class:"text-primary hover:text-orange-600 text-sm font-semibold flex items-center"},[x(" See All "),t("i",{class:"ml-1 pi pi-angle-right"})],-1)])),_:1})]),t("div",nt,[(d(!0),i(w,null,P(r.products,(s,u)=>{var n,c,e;return d(),i("div",{key:u,class:"border rounded-lg p-3"},[t("img",{src:(c=(n=s==null?void 0:s.images)==null?void 0:n.find(m=>m.isPrimary))==null?void 0:c.uploadUrl,alt:((e=s.productModel)==null?void 0:e.name)||s.name,class:"w-full h-40 object-cover"},null,8,ct),t("p",mt,a(s.name),1),t("p",ut," KES "+a(r.formattedPrice(s.price)),1)])}),128))])]),f(b,{position:"bottom-right",group:"br"})])}const yt=F(z,[["render",gt]]);export{yt as default};
