import{s as W,_ as q}from"./DRxTo1v3.js";import{s as G}from"./Csxfib7I.js";import{F as H,_ as Q,a as Y,T as J,b as X,c as Z,d as $}from"./C4s2DSsF.js";import{_ as ee,f as te,R as se,P as oe,r as a,Q as re,y as P,q as k,c,b,a as e,w as ne,F as N,m as I,G as R,I as M,o as i,u as ae,t as m,d as ie}from"./dcrsIaZE.js";import"./Dj_27Dys.js";import"./DqKEoG3B.js";import"./DqxxeYP8.js";import"./D441Pcds.js";import"./BLQ8y9oz.js";import"./B29C1APa.js";import"./DrIwKKCV.js";import"./B21at0O7.js";import"./DKYX6cxl.js";const ce={name:"Dashboard",components:{FlashCard:H,CategoryCard:Q,ProductCard:Y,TopCard:J,Footer:X,FilterCard:Z},props:{searchTerm:{type:String,default:""}},setup(f){te(()=>f.searchTerm,(t,n)=>{S.value=!0,y()}),se(async()=>{y(),o(),await L()});const r=oe(),C=a(1);a(1);const s=re(()=>[...x.value].sort(()=>Math.random()-.5).slice(0,6)),S=a(!1),g=a(null),w=a([20,80]),l=a(!1),d=a(!1),h=a({days:"00",hours:"00",minutes:"00",seconds:"00"}),T=t=>{r.push({path:`/products/${t.id}`})},O=a(new Date(new Date().getTime()+3*24*60*60*1e3)),o=()=>{const t=new Date().getTime(),n=O.value-t;n>0?h.value={days:Math.floor(n/(1e3*60*60*24)).toString().padStart(2,"0"),hours:Math.floor(n%(1e3*60*60*24)/(1e3*60*60)).toString().padStart(2,"0"),minutes:Math.floor(n%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0"),seconds:Math.floor(n%(1e3*60)/1e3).toString().padStart(2,"0")}:(clearInterval(this.timer),h.value={days:"00",hours:"00",minutes:"00",seconds:"00"})},_={"HD ANALOGUE CAMERAS AND DVR":"pi pi-video","IP NETWORK CAMERAS AND NVR":"pi pi-wifi","ACCESS CONTROL PRODUCTS":"pi pi-lock","VIDEO INTERCOM PRODUCTS":"pi pi-phone","NETWORK AND CABLES PRODUCTS":"pi pi-sitemap","MONITOR DISPLAY PRODUCTS":"pi pi-desktop","ACCESSORIES PRODUCTS":"pi pi-cog",Phones:"pi pi-mobile"},v=t=>_[t]||"pi pi-question",p=a([]),D=a([]);P();const x=a([]),u=a(0),A=()=>{u.value=(u.value+1)%p.value.length},E=()=>{C.value++,y()},V=()=>{u.value=(u.value-1+p.value.length)%p.value.length},F=t=>{console.log("ca",t)},U=t=>t?new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh",minimumFractionDigits:0}).format(t):"0",j=t=>{console.log("findCategoryProductsw",t),g.value=[t.id],y()},B=t=>{u.value=t},y=async()=>{l.value=!0,d.value=!0;try{const{$axios:t}=P(),n={};f.searchTerm&&(n.searchTerm=f.searchTerm),g.value&&(n.categoryIds=g.value);const z=await t.get("/product/product-models",{params:{...n,page:C.value,limit:10}});l.value=!1,d.value=!1,x.value=[...x.value,...z.data.results]}catch(t){console.error("Error fetching products:",t),l.value=!1,d.value=!1}},L=async()=>{const{$axios:t}=P();try{const n=await t.get("/product/categories",{});D.value=n.data}catch(n){console.error("Error fetching products:",n)}},K=a([{breakpoint:"1400px",numVisible:2,numScroll:1},{breakpoint:"1199px",numVisible:3,numScroll:1},{breakpoint:"767px",numVisible:2,numScroll:1},{breakpoint:"575px",numVisible:1,numScroll:1}]);return{images:p,currentIndex:u,nextSlide:A,prevSlide:V,goToSlide:B,categories:D,products:x,responsiveOptions:K,getItems:F,getSeverity:t=>{switch(t){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return null}},value:w,filter:S,showMoreProducts:E,fetching:l,fetchingMore:d,formatPrice:U,randomizedProducts:s,goToProductPage:T,getIcon:v,getCategoryProducts:j}}},le={class:"container mx-auto my-10 pa-10"},de={class:"flash-sales mt-12 mx-4"},ue=["onClick"],me={class:"p-4"},pe={class:"mb-4 text-xs font-medium text-center flex items-center"},fe={class:"pl-2"},ge={class:"flex justify-between items-center"},he={class:"mt-0 font-semibold text-xl"},_e={class:"p-4 rounded-md"},ve={class:"flex overflow-x-auto gap-4 p-2"},xe=["onClick"],ye={class:"relative"},be=["src","alt"],Ce={class:"text-sm font-medium mt-2 truncate"},Se={class:"text-lg font-semibold text-gray-900"},we={class:"text-gray-500 text-xs line-through"},Te={class:"flash-sales mt-5 mx-2 full-screen",style:{"min-height":"900px"}},Oe={class:"flex"},Pe={class:"w-full"},ke={key:0,class:"text-center mt-6"},De={key:1,class:"flex flex-col items-center justify-center text-center mt-12 text-gray-500"},Ne={key:2,class:"grid gap-3 grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 justify-center"},Ie={key:3,class:"flex justify-center py-8"};function Re(f,r,C,s,S,g){const w=k("TopCard"),l=W,d=k("FilterCard"),h=k("ProductCard"),T=G,O=q;return i(),c("div",le,[b(w,{categories:s.categories},null,8,["categories"]),e("section",de,[r[1]||(r[1]=e("h2",{class:"text-xl font-bold"},"Browse By Category",-1)),b(l,{value:s.categories,numVisible:4,numScroll:5,responsiveOptions:s.responsiveOptions},{item:ne(o=>[e("div",{onClick:_=>s.getCategoryProducts(o.data),class:"border border-surface-200 dark:border-surface-700 rounded m-2 bg-white cursor-pointer"},[e("div",me,[e("div",pe,[e("i",{class:ae(s.getIcon(o.data.name))},null,2),e("span",fe,m(o.data.name),1)]),e("div",ge,[e("div",he,m(o.data.price),1)])])],8,ue)]),_:1},8,["value","responsiveOptions"])]),e("section",null,[e("div",_e,[r[2]||(r[2]=e("div",{class:"flex justify-between items-center mb-4 px-2"},[e("h2",{class:"text-lg font-semibold"},"Top selling items")],-1)),e("div",ve,[(i(!0),c(N,null,I(s.randomizedProducts,(o,_)=>{var v;return i(),c("div",{key:_,class:"min-w-[200px] md:min-w-[220px] bg-white rounded-md shadow-md cursor-pointer p-2",onClick:p=>s.goToProductPage(o)},[e("div",ye,[e("img",{src:(v=o.images[0])==null?void 0:v.optimizeUrl,alt:o.name,class:"w-full h-36 object-cover rounded-md"},null,8,be)]),ie(" "+m(o.product.name)+" ",1),e("h3",Ce,m(o.name),1),e("p",Se,m(s.formatPrice(o.price)),1),e("p",we,m(o.oldPrice),1)],8,xe)}),128))])])]),e("section",Te,[r[5]||(r[5]=e("div",{class:"flex justify-between items-center mb-4"},[e("h2",{class:"text-xl font-bold"},"Explore Our Products"),e("div",{class:"flex space-x-2"},[e("button",{class:"bg-red-500 text-white px-4 py-2"},"View All")])],-1)),e("div",Oe,[s.filter?(i(),R(d,{key:0})):M("",!0),e("div",Pe,[s.fetching&&s.products.length<1?(i(),c("div",ke,r[3]||(r[3]=[e("div",{class:"relative flex justify-center items-center"},[e("div",{class:"absolute animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-purple-100"}),e("img",{src:"https://freelancerdxb.s3.eu-central-1.amazonaws.com/documents/image%20%285%29__5d197f13926ac20a20a6f301d00ce69b516f83eb.png",class:"rounded-full h-24 w-24"})],-1)]))):s.products.length==0?(i(),c("div",De,r[4]||(r[4]=[e("img",{src:$,alt:"No items found",class:"h-56 w-56"},null,-1),e("p",{class:"pt-6"},"No items found",-1)]))):(i(),c("div",Ne,[(i(!0),c(N,null,I(s.products,o=>(i(),R(h,{key:o.id,item:o},null,8,["item"]))),128))])),s.products.length!=0?(i(),c("div",Ie,[b(T,{type:"button",label:"Show More",icon:"pi pi-sync",loading:s.fetchingMore,onClick:r[0]||(r[0]=o=>s.showMoreProducts())},null,8,["loading"])])):M("",!0)])])]),b(O)])}const He=ee(ce,[["render",Re],["__scopeId","data-v-c36a6f73"]]);export{He as default};
