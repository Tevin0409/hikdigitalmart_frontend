import{_ as $}from"./BFdJCV_K.js";import{s as F}from"./D7pYg71G.js";import{y as P,R as D,J as L,r as x,S,U as z,q as G,c as n,a as t,b as f,w as b,t as o,F as T,m as B,N as J,V as Y,I as M,o as a,G as H,v as N,u as O}from"./Dvr-1P0k.js";import{_ as W}from"./CgispuM3.js";import"./CEKDN7gs.js";import"./Da1NbyRp.js";const X={class:"cart"},Z={class:"mx-auto container"},tt=["href","onClick"],st={class:"text-primary font-semibold"},et=["href","target"],ot={class:"text-surface-700 dark:text-surface-0"},at={key:0,class:"flex flex-col items-center bg-white rounded-lg p-6 mb-6 container mx-auto"},nt={key:1,class:"mx-auto container"},lt={class:"bg-red-10 rounded-lg p-4"},rt={class:"flex justify-between items-center mb-4"},it={class:"text-lg font-semibold text-gray-700"},dt={class:"bg-white mx-auto"},ct={class:"bg-white grid grid-cols-12 gap-4"},ut={class:"col-span-12 md:col-span-9"},mt={class:"flex flex-wrap items-start gap-4"},pt=["src"],_t={class:"flex-grow min-w-0"},xt={class:"text-base sm:text-lg font-medium truncate"},bt={class:"text-gray-600 text-sm sm:text-base truncate"},ht={class:"font-bold"},gt={class:"text-right"},ft={class:"text-lg sm:text-xl font-semibold text-gray-900"},vt={class:"flex items-center"},yt=["onClick","disabled"],wt={class:"px-3 sm:px-4 text-sm sm:text-base"},kt=["onClick"],Ct={class:"flex flex-wrap items-center justify-between mt-4"},Vt=["onClick"],qt={class:"col-span-12 md:col-span-3"},Pt={class:"cart-total rounded-lg p4 bg-white shadow"},St={class:"text-gray-600"},Tt={class:"flex items-center justify-between my-4"},Bt={class:"relative inline-flex items-center cursor-pointer"},Mt={key:0,class:"my-2"},Nt={key:1,class:"flex justify-between text-gray-600"},Qt={class:"text-lg font-bold"},$t={__name:"index",setup(jt){const{$formatPrice:Q}=P(),j=D(),m=L();P(),x("");const i=S(()=>m.cartTotal),h=S(()=>m.cartItems),d=x(!1),I=x({icon:"pi pi-home",route:"/dashboard"}),A=x([{label:"Quotations",route:"/cart"},{label:"Quotation",route:"/checkout"}]),c=l=>Q(l),v=async(l,s)=>{await m.updateQuantity(l,s)},E=async l=>{await m.removeFromCart(l.id)},g=l=>l*.16,K=()=>{j.push("/checkout")};return z(()=>{}),(l,s)=>{const R=G("router-link"),U=F,y=$;return a(),n("div",X,[t("div",Z,[f(U,{home:I.value,model:A.value,class:""},{item:b(({item:e,props:u})=>[e.route?(a(),H(R,{key:0,to:e.route,custom:""},{default:b(({href:p,navigate:_})=>[t("a",N({href:p},u.action,{onClick:_}),[t("span",{class:O([e.icon,"text-color"])},null,2),t("span",st,o(e.label),1)],16,tt)]),_:2},1032,["to"])):(a(),n("a",N({key:1,href:e.url,target:e.target},u.action),[t("span",ot,o(e.label),1)],16,et))]),_:1},8,["home","model"])]),h.value.length<1?(a(),n("div",at,[s[2]||(s[2]=t("img",{src:W,alt:"Empty Cart",class:"w-20 h-20 mb-4"},null,-1)),s[3]||(s[3]=t("h2",{class:"text-xl font-semibold text-gray-700"}," Your have no quotation ",-1)),s[4]||(s[4]=t("p",{class:"text-gray-500 text-sm mb-4"}," Browse our categories and discover our best deals! ",-1)),f(y,{to:"/dashboard"},{default:b(()=>s[1]||(s[1]=[t("button",{class:"bg-primary hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded"}," Start Shopping ",-1)])),_:1})])):(a(),n("div",nt,[t("div",lt,[t("div",rt,[t("h3",it," Quotation ("+o(h.value.length)+") ",1),f(y,{to:"/quotation"},{default:b(()=>s[5]||(s[5]=[t("a",{href:"#",class:"text-primary hover:text-orange-600 text-sm font-semibold flex items-center"},null,-1)])),_:1})]),t("div",dt,[t("div",ct,[t("div",ut,[(a(!0),n(T,null,B(h.value,e=>{var u,p,_,w,k,C,V,q;return a(),n("div",{class:"rounded-lg p-4 gap-3 pb-4 mb-2 border cursor-pointer bg-white shadow-sm",key:e.id},[t("div",mt,[t("img",{class:"w-16 h-16 sm:w-20 sm:h-20 object-contain",src:((_=(p=(u=e.productModel)==null?void 0:u.images)==null?void 0:p.find(r=>r.isPrimary))==null?void 0:_.uploadUrl)??((k=(w=e.images)==null?void 0:w.find(r=>r.isPrimary))==null?void 0:k.uploadUrl),alt:"Product Image"},null,8,pt),t("div",_t,[t("h2",xt,o(((C=e.productModel)==null?void 0:C.name)??e.name),1),t("p",bt,[(a(!0),n(T,null,B(e.features||((V=e.productModel)==null?void 0:V.features),r=>(a(),n("span",ht,o(r.description),1))),256))])]),t("div",gt,[t("p",ft," Ksh "+o(c(((q=e.productModel)==null?void 0:q.price)??e.price)),1),t("div",vt,[t("button",{onClick:r=>v(e.id,e.quantity-1),class:"bg-gray-300 px-2 sm:px-3 py-1 rounded-lg disabled:opacity-50",disabled:e.quantity<=1}," - ",8,yt),t("span",wt,o(e.quantity),1),t("button",{onClick:r=>v(e.id,e.quantity+1),class:"bg-primary text-white px-2 sm:px-3 py-1 rounded-lg"}," + ",8,kt)])]),t("div",Ct,[t("button",{onClick:r=>E(e),class:"text-red-500 flex items-center text-sm sm:text-base"},s[6]||(s[6]=[t("span",{class:"mr-2"}," Remove 🗑️",-1)]),8,Vt)])])])}),128))]),t("div",qt,[t("div",Pt,[s[11]||(s[11]=t("h3",{class:"text-lg font-semibold mb-2"},"Estimated Total",-1)),t("p",St," Subtotal: Ksh "+o(c(i.value)),1),t("div",Tt,[s[9]||(s[9]=t("label",{class:"text-gray-600"},"Apply VAT (16%)",-1)),t("label",Bt,[J(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"sr-only peer"},null,512),[[Y,d.value]]),s[7]||(s[7]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-primary transition-colors"},null,-1)),s[8]||(s[8]=t("div",{class:"absolute left-1 top-1 bg-white border border-gray-300 w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5"},null,-1))])]),d.value?(a(),n("hr",Mt)):M("",!0),d.value?(a(),n("div",Nt,[s[10]||(s[10]=t("span",null,"VAT",-1)),t("span",null,"Ksh "+o(c(g(i.value))),1)])):M("",!0),s[12]||(s[12]=t("hr",{class:"my-2"},null,-1)),t("p",Qt," Total Estimate: Ksh "+o(c(i.value+(d.value?g(i.value):0))),1),t("button",{class:"w-full bg-primary text-white py-2 mt-4 rounded-lg hover:bg-secondary transition",onClick:K}," Request Quotation ("+o(c(i.value+(d.value?g(i.value):0)))+") ",1)])])])])])]))])}}};export{$t as default};
